<!DOCTYPE html> <html lang="en-us"> <head> <link href="http://gmpg.org/xfn/11" rel="profile"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta http-equiv="content-type" content="text/html; charset=utf-8"> <meta name="description" content="SQL Server R Services series. This first post look at installation of SQL Server R Services."> <meta name="keywords" content="SQL Server R Services, SQL Server Machine Learning Services, R, RevoScaleR, Python, Julia"/> <!-- Enable responsiveness on mobile devices--> <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"> <title> Microsoft SQL Server 2016 R Services Installation &middot; Niels Berglund </title> <!-- CSS --> <link rel="stylesheet" href="/public/css/poole.css"> <link rel="stylesheet" href="/public/css/syntax.css"> <link rel="stylesheet" href="/public/css/hyde.css"> <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface"> <!-- Icons --> <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png"> <link rel="shortcut icon" href="/public/favicon.ico"> <!-- RSS --> <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml"> <link href='/stylesheets/all-6937d9aff18f4bd864a4e4772a407120.css' media='all' rel='stylesheet' type='text/css'> <!-- Begin Jekyll SEO tag v2.3.0 --> <title>Microsoft SQL Server 2016 R Services Installation | Niels Berglund</title> <meta property="og:title" content="Microsoft SQL Server 2016 R Services Installation" /> <meta name="author" content="nielsb" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="SQL Server R Services series. This first post look at installation of SQL Server R Services." /> <meta property="og:description" content="SQL Server R Services series. This first post look at installation of SQL Server R Services." /> <link rel="canonical" href="http://nielsberglund.com/2017/03/04/microsoft-sql-server-2016-r-services-installation/" /> <meta property="og:url" content="http://nielsberglund.com/2017/03/04/microsoft-sql-server-2016-r-services-installation/" /> <meta property="og:site_name" content="Niels Berglund" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2017-03-04T10:19:22+02:00" /> <script type="application/ld+json"> {"name":null,"description":"SQL Server R Services series. This first post look at installation of SQL Server R Services.","author":{"@type":"Person","name":"nielsb"},"@type":"BlogPosting","url":"http://nielsberglund.com/2017/03/04/microsoft-sql-server-2016-r-services-installation/","publisher":null,"image":null,"headline":"Microsoft SQL Server 2016 R Services Installation","dateModified":"2017-03-04T10:19:22+02:00","datePublished":"2017-03-04T10:19:22+02:00","sameAs":null,"mainEntityOfPage":{"@type":"WebPage","@id":"http://nielsberglund.com/2017/03/04/microsoft-sql-server-2016-r-services-installation/"},"@context":"http://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <div class="sidebar"> <div class="container"> <div class="sidebar-about"> <h1> <a href="/"> Niels Berglund </a> </h1> <p class="lead">Technology musings about coding and data. Some topics: .NET, SQL Server, Data Science, R, Windows Azure and a lot more.</p> </div> <nav class="sidebar-nav"> <a class="sidebar-nav-item" href="/">Home</a> <a class="sidebar-nav-item" href="/about/">About</a> <a class="sidebar-nav-item" href="/archive/">Posts Archive</a> <a class="sidebar-nav-item" href="/categories/">Categories</a> <a class="sidebar-nav-item" href="/disclaimer/">Disclaimer</a> <a class="sidebar-nav-item" href="/tags/">Tags</a> </nav> <img class="center" src="/images/MVP_Logo.png" width="181" height="74" > <section> <h3 style="color:#ffffff">Follow Me:</h3> <ul> <li><a href="https://twitter.com/nielsberglund" target="_blank">Twitter</a></li> <li><a href="http://feeds.feedburner.com/manageddata/" target="_blank">RSS/Atom Feed</a></li> </ul> </section> <p>&copy; 2018. All rights reserved.</p> <div class="sidebar-social"> <div><a href="https://github.com/nberglund"> GitHub </a></div> <div><a href="https://twitter.com/nielsberglund"> Twitter </a></div> <div><a href="https://za.linkedin.com/in/niels-berglund-0122593"> LinkedIn </a></div> <div><a href="https://plus.google.com/u/0/109374849138720664008"> Google+ </a></div> </div> </div> </div> <div class="content container"> <div class="post"> <h1 class="post-title">Microsoft SQL Server 2016 R Services Installation</h1> <div class="post-subheading"> <span class="post-date">04 Mar 2017</span> <span class="post-tag"> <span class="post-tagdesc">in categories:</span> <a href="/categories/#SQL Server">SQL Server</a> <a href="/categories/#Microsoft R Server">Microsoft R Server</a> <a href="/categories/#Data Science">Data Science</a> <span class="post-tagdesc">tags:</span> <a href="/tags/#SQL Server R Services">SQL Server R Services</a> <a href="/tags/#SQL Server Machine Learning Services">SQL Server Machine Learning Services</a> <a href="/tags/#R">R</a> <a href="/tags/#RevoScaleR">RevoScaleR</a> <a href="/tags/#Python">Python</a> <a href="/tags/#Julia">Julia</a> </span> </div> <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <!-- Ad1 --> <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-3005153158271538" data-ad-slot="6668073777" data-ad-format="auto"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script> <br/> <p>A couple of weeks beck I wrote a <a href="/2017/02/25/microsoft-r-server/">blog-post where I compared CRAN R with Microsoft R Server</a>. The comparison was basically how large data sets are handled. In the post I mentioned that SQL Server 2016 (and later) is the delivery mechanism for Microsoft R Server on the Windows platform. In this post we will look at how to install and enable SQL Server R Services.</p> <p>This post is the first in a series of posts about SQL Server R Services:</p> <ol> <li>Microsoft SQL Server 2016 R Services Installation (this post)</li> <li><a href="/2017/03/18/microsoft-sql-server-r-services-internals-i/">Microsoft SQL Server R Services - Internals I</a></li> <li><a href="/2017/04/02/microsoft-sql-server-r-services-internals-ii/">Microsoft SQL Server R Services - Internals II</a></li> <li><a href="/2017/04/13/microsoft-sql-server-r-services-internals-iii/">Microsoft SQL Server R Services - Internals III</a></li> <li><a href="/2017/04/23/microsoft-sql-server-r-services-internals-iv/">Microsoft SQL Server R Services - Internals IV</a></li> <li><a href="/2017/05/01/microsoft-sql-server-r-services-internals-v/">Microsoft SQL Server R Services - Internals V</a></li> <li><a href="/2017/05/16/microsoft-sql-server-r-services-internals-vi/">Microsoft SQL Server R Services - Internals VI</a></li> <li><a href="/2017/07/11/microsoft-sql-server-r-services-internals-vii/">Microsoft SQL Server R Services - Internals VII</a></li> <li><a href="/2017/07/22/microsoft-sql-server-r-services-internals-viii/">Microsoft SQL Server R Services - Internals VIII</a></li> <li><a href="/2017/08/18/microsoft-sql-server-r-services-internals-ix/">Microsoft SQL Server R Services - Internals IX</a></li> <li><a href="/2017/08/29/microsoft-sql-server-r-services-internals-x/">Microsoft SQL Server R Services - Internals X</a></li> <li><a href="/2017/10/20/microsoft-sql-server-r-services-internals-xi/">Microsoft SQL Server R Services - Internals XI</a></li> <li><a href="/2017/10/31/microsoft-sql-server-r-services-internals-xii/">Microsoft SQL Server R Services - Internals XII</a></li> <li><a href="/2017/11/11/microsoft-sql-server-r-services-internals-xiii/">Microsoft SQL Server R Services - Internals XIII</a></li> <li><a href="/2017/11/25/microsoft-sql-server-r-services-internals-xiv/">Microsoft SQL Server R Services - Internals XIV</a></li> <li><a href="/2017/12/02/microsoft-sql-server-r-services-internals-xv/">Microsoft SQL Server R Services - Internals XV</a></li> <li><a href="/2017/12/24/microsoft-sql-server-r-services-internals-xvi/">Microsoft SQL Server R Services - Internals XVI</a></li> <li><a href="/2018/01/03/microsoft-sql-server-r-services-internals-xvii/">Microsoft SQL Server R Services - Internals XVII</a></li> <li><a href="/2018/01/10/microsoft-sql-server-r-services-internals-xviii/">Microsoft SQL Server R Services - Internals XVIII</a></li> <li><a href="/2018/01/20/microsoft-sql-server-r-services-internals-xix/">Microsoft SQL Server R Services - Internals XIX</a></li> <li><a href="/2018/02/02/microsoft-sql-server-r-services-internals-xx/">Microsoft SQL Server R Services - Internals XX</a></li> <li>More to come (hopefully)</li> </ol> <!--more--> <p>In the "Microsoft R Server" post I wrote that CRAN R, as good as it is, in certain scenarios it is less then ideal:</p> <ul> <li>Data movement - the data you work with has to be moved from source to your machine.</li> <li>Operationalization - having created an awesome model, how do you put it in production.</li> <li>Scale / performance - R is single threaded and all data has to be in memory.</li> </ul> <p>SQL Server R Services addresses these issues, which we will see later. For now let us see what SQL Server R Services is.</p> <h2>Introduction</h2> <p>Back in 2015 Microsoft bought Revolution Analytics. Revolution Analytics is a company who developed a big data, large scale multiprocessor computing, and multi-core functionality version of R: <strong>Revolution R Enterprise</strong>, which Microsoft re-branded to Microsoft R Server. At the heart of Microsoft R Server is RevoscaleR; an R package providing both High Performance Computing (HPC) and High Performance Analytics (HPA) capabilities for R. HPC allows distribution of the execution of essentially any R function across cores and nodes, and deliver the results back to the user, whereas HPA adds the ability to handle very large datasets (Big Data).</p> <p>SQL Server R Services is the conduit between SQL Server and Microsoft R Server, and allows the execution of R code from inside SQL Server. Hmm, execution of R code from inside SQL Server, let's think about the implications of being able to do that, and put that in relation to the CRAN R issues above:</p> <ul> <li>A data scientist can theoretically create his model(s) from inside the database. If the source of the data is the database, there are no movement of data.</li> <li>The model(s) can be stored in the database and subsequently be used to analyze/predict new data. For example, a stored procedure can be created to output predictions. All of a sudden the issue of operationalization has been solved.</li> <li>SQL Server is multi-threaded and supports parallelism, which should take care of the scale and performance issues in R. Furthermore the various RevoScaleR functions are optimized for multi-threading as well as large data volumes.</li> </ul> <blockquote><p><strong>NOTE:</strong> If you are executing R code from an IDE (and not from inside SQL Server), you can still have your code execute on SQL Server by using an RevoScaleR feature; the <em>compute context</em>. The <em>compute context</em> is not "in scope" for this blog-post, but you can read more about it <a href="https://msdn.microsoft.com/microsoft-r/scaler/rxcomputecontext">here</a>.</p></blockquote> <h2>Installation</h2> <p>The SQL Server R Services has to be explicitly installed in SQL Server, it is not like SQLCLR - which just needs to be enabled. Installing SQL Server R Service can be done when installing a new SQL Server instance or it can be added afterwards as a new feature. Here we'll see how we install the R Services together with a new instance of SQL Server:</p> <p><img class="center" src="/images/posts/sql_installation_type.png" width="650" height="260" > <strong>Figure 1:</strong> <em>SQL Server Installation Type</em></p> <p>In <em>Figure 1</em> we are choosing to do a new installation of SQL Server. We then choose what features we want installed:</p> <p><img class="center" src="/images/posts/sql_r_services_in_db.png" width="650" height="249" > <strong>Figure 2:</strong> <em>Features to Install</em></p> <p>When you install SQL Server 2016, you find a new feature under the <em>Database Engine Services</em>: <em>R Services (In-Database)</em>, as in Figure 2. This is the install option when you want to integrate with R from within SQL Server. In the <em>Feature Selection</em> dialog, under <em>Shared Features</em> you also have <em>R Server (Standalone)</em>, what is that all about:</p> <p><img class="center" src="/images/posts/sql_windows_r_server.png" width="650" height="297" > <strong>Figure 3:</strong> <em>Windows R Server</em></p> <p>SQL Server 2016 acts as the delivery mechanism for Microsoft R Server on Windows, and the <em>R Server</em> feature allows you to install Microsoft R Server independent of SQL Server. For example, if a data scientist want to run R on his or her own machine.</p> <blockquote><p><strong>NOTE:</strong> You may wonder why, in <em>Figure 3</em>, the check box for R Server is checked, but "dimmed" out? This is because, on this particular machine, I have already installed the standalone R Server once.</p></blockquote> <p>Go ahead and install after you have chosen the various features to install on your new instance. After successful installation we should check and make sure everything works, but before that let's talk about a couple of very important pieces of the SQL Server R Services "puzzle".</p> <h2>SQL Server Launchpad</h2> <p>Let us start with the launchpad service. After installation, if you go to <em>Services</em>, you will see your newly installed SQL Server instance <em>SQL Server (InstanceName)</em>, but also a new service which hasn't been in earlier versions of SQL Server; the Launchpad service. You can see it in <em>Figure 4</em> below:</p> <p><img class="center" src="/images/posts/sql_launchpad.png" width="650" height="167" > <strong>Figure 4:</strong> <em>Windows R Server</em></p> <p>In the <em>Introduction</em> section I wrote how SQL Server R Services is the conduit between SQL Server and Microsoft R Server, and the launchpad service plays a big part of this. The service acts as a "routing" mechanism between SQL Server and external languages/runtimes. The responsibility of the launchpad service is to "spin up" and calling into the correct runtime when calling from inside SQL Server.</p> <blockquote><p><strong>NOTE:</strong> Right now, the only "runtime"/language supported by the launchpad service is R.</p></blockquote> <p>Another piece of the "puzzle" is the the extended stored procedure: <code>sp_execute_external_script</code></p> <h2>sp_execute_external_script</h2> <p>This is the procedure that will be used when executing R code inside SQL Server. The procedure will call into the launchpad service, and have the launchpad service "route" the call to the correct runtime.</p> <p>The syntax for the procedure as copied from <a href="https://msdn.microsoft.com/en-us/library/mt604368.aspx">MSDN</a>, looks like so:</p> <p><figure class='code-highlight-figure'><figcaption class='code-highlight-caption'><span class='code-highlight-caption-title'>sp_execute_external_script</span></figcaption><div class='code-highlight'><pre class='code-highlight-pre'><div data-line='1' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="n">sp_execute_external_script</span>
</div></div><div data-line='2' class='code-highlight-row numbered'><div class='code-highlight-line'>             <span class="o">@</span><span class="k">language</span> <span class="o">=</span> <span class="n">N</span><span class="s1">'language'</span><span class="p">,</span>
</div></div><div data-line='3' class='code-highlight-row numbered'><div class='code-highlight-line'>             <span class="o">@</span><span class="n">script</span> <span class="o">=</span> <span class="n">N</span><span class="s1">'script'</span><span class="p">,</span>
</div></div><div data-line='4' class='code-highlight-row numbered'><div class='code-highlight-line'>             <span class="o">@</span><span class="n">input_data_1</span> <span class="o">=</span> <span class="p">]</span> <span class="s1">'input_data_1'</span>
</div></div><div data-line='5' class='code-highlight-row numbered'><div class='code-highlight-line'>             <span class="p">[</span> <span class="p">,</span> <span class="o">@</span><span class="n">input_data_1_name</span> <span class="o">=</span> <span class="p">]</span> <span class="n">N</span><span class="s1">'input_data_1_name'</span> <span class="p">]</span>
</div></div><div data-line='6' class='code-highlight-row numbered'><div class='code-highlight-line'>             <span class="p">[</span> <span class="p">,</span> <span class="o">@</span><span class="n">output_data_1_name</span> <span class="o">=</span> <span class="s1">'output_data_1_name'</span> <span class="p">]</span>
</div></div><div data-line='7' class='code-highlight-row numbered'><div class='code-highlight-line'>             <span class="p">[</span> <span class="p">,</span> <span class="o">@</span><span class="n">parallel</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span> <span class="mi">1</span> <span class="p">]</span>
</div></div><div data-line='8' class='code-highlight-row numbered'><div class='code-highlight-line'>             <span class="p">[</span> <span class="p">,</span> <span class="o">@</span><span class="n">params</span> <span class="o">=</span> <span class="p">]</span> <span class="n">N</span><span class="s1">'@parameter_name data_type [ OUT | OUTPUT ] [ ,...n ]'</span>
</div></div><div data-line='9' class='code-highlight-row numbered'><div class='code-highlight-line'>             <span class="p">[</span> <span class="p">,</span> <span class="o">@</span><span class="n">parameter1</span> <span class="o">=</span> <span class="p">]</span> <span class="s1">'value1'</span> <span class="p">[</span> <span class="k">OUT</span> <span class="o">|</span> <span class="k">OUTPUT</span> <span class="p">]</span> <span class="p">[</span> <span class="p">,...</span><span class="n">n</span> <span class="p">]</span>
</div></div><div data-line='10' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="p">[</span> <span class="k">WITH</span> <span class="o">&lt;</span><span class="n">execute_option</span><span class="o">&gt;</span> <span class="p">]</span>
</div></div><div data-line='11' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="p">[;]</span>
</div></div><div data-line='12' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div><div data-line='13' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="o">&lt;</span><span class="n">execute_option</span><span class="o">&gt;</span><span class="p">::</span><span class="o">=</span>
</div></div><div data-line='14' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="err">&#x7b;</span>
</div></div><div data-line='15' class='code-highlight-row numbered'><div class='code-highlight-line'>  <span class="err">&#x7b;</span> <span class="k">RESULT</span> <span class="k">SETS</span> <span class="n">UNDEFINED</span> <span class="err">&#x7d;</span>
</div></div><div data-line='16' class='code-highlight-row numbered'><div class='code-highlight-line'>  <span class="o">|</span> <span class="err">&#x7b;</span> <span class="k">RESULT</span> <span class="k">SETS</span> <span class="k">NONE</span> <span class="err">&#x7d;</span>
</div></div><div data-line='17' class='code-highlight-row numbered'><div class='code-highlight-line'>  <span class="o">|</span> <span class="err">&#x7b;</span> <span class="k">RESULT</span> <span class="k">SETS</span> <span class="p">(</span> <span class="o">&lt;</span><span class="n">result_sets_definition</span><span class="o">&gt;</span> <span class="p">)</span> <span class="err">&#x7d;</span>
</div></div><div data-line='18' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="err">&#x7d;</span><br/>
</div></div><div data-line='19' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div><div data-line='20' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="o">&lt;</span><span class="n">result_sets_definition</span><span class="o">&gt;</span> <span class="p">::</span><span class="o">=</span><br/>
</div></div><div data-line='21' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="err">&#x7b;</span>
</div></div><div data-line='22' class='code-highlight-row numbered'><div class='code-highlight-line'>  <span class="p">(</span>
</div></div><div data-line='23' class='code-highlight-row numbered'><div class='code-highlight-line'>    <span class="err">&#x7b;</span> <span class="k">column_name</span>
</div></div><div data-line='24' class='code-highlight-row numbered'><div class='code-highlight-line'>      <span class="n">data_type</span>
</div></div><div data-line='25' class='code-highlight-row numbered'><div class='code-highlight-line'>      <span class="p">[</span> <span class="k">COLLATE</span> <span class="k">collation_name</span> <span class="p">]</span>
</div></div><div data-line='26' class='code-highlight-row numbered'><div class='code-highlight-line'>      <span class="p">[</span> <span class="k">NULL</span> <span class="o">|</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="p">]</span> <span class="err">&#x7d;</span>
</div></div><div data-line='27' class='code-highlight-row numbered'><div class='code-highlight-line'>      <span class="p">[,...</span><span class="n">n</span> <span class="p">]</span><br/>
</div></div><div data-line='28' class='code-highlight-row numbered'><div class='code-highlight-line'>  <span class="p">)</span>
</div></div><div data-line='29' class='code-highlight-row numbered'><div class='code-highlight-line'>  <span class="o">|</span> <span class="k">AS</span> <span class="k">OBJECT</span>
</div></div><div data-line='30' class='code-highlight-row numbered'><div class='code-highlight-line'>      <span class="p">[</span> <span class="n">db_name</span> <span class="p">.</span> <span class="p">[</span> <span class="k">schema_name</span> <span class="p">]</span> <span class="p">.</span> <span class="o">|</span> <span class="k">schema_name</span> <span class="p">.</span> <span class="p">]</span>
</div></div><div data-line='31' class='code-highlight-row numbered'><div class='code-highlight-line'>      <span class="err">&#x7b;</span><span class="k">table_name</span> <span class="o">|</span> <span class="n">view_name</span> <span class="o">|</span> <span class="n">table_valued_function_name</span> <span class="err">&#x7d;</span>
</div></div><div data-line='32' class='code-highlight-row numbered'><div class='code-highlight-line'>  <span class="o">|</span> <span class="k">AS</span> <span class="k">TYPE</span> <span class="p">[</span> <span class="k">schema_name</span><span class="p">.]</span><span class="n">table_type_name</span>
</div></div><div data-line='33' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="err">&#x7d;</span></div></div></pre></div></figure></p> <p><strong>Code Snippet 1:</strong> <em>Syntax of sp_execute_external_script</em></p> <p>If you look at the syntax and thinks it looks convoluted, you are right. But do not worry, in a future blog-post we will look more in detail at what <code>sp_execute_external_script</code> does, and further down in this post we will see a very simple example of it. One thing to notice though is the first parameter in the proc: <code>@language</code>. This parameter defines the language/runtime, and as mentioned a couple of times before, right now the only language/runtime supported is R. There are rumors that <a href="https://www.python.org/">Python</a> will be supported in the future, as well as <a href="http://julialang.org/">Julia</a>.</p> <h2>Making Sure it Works</h2> <p>Now when we have installed the SQL Server R Services, and also have had a (very) short introduction to some of the "moving parts", let's enable SQL Server R Services, and execute something to actually see it works.</p> <h3>Enable SQL Server R Services</h3> <p>Enable, what do you mean enable? I have just installed it, isn't that enough? No it is not, after installation you need to enable the services. This is a bit like what you do with SQLCLR, you are enabling the execution of SQLCLR on the instance. Here you enable the execution of external scripts. To enable external scripts you change the configuration of the SQL Server instance you are on:</p> <p><figure class='code-highlight-figure'><figcaption class='code-highlight-caption'><span class='code-highlight-caption-title'>Enable External Scripts</span></figcaption><div class='code-highlight'><pre class='code-highlight-pre'><div data-line='1' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="k">EXEC</span> <span class="n">sp_configure</span>  <span class="s1">'external scripts enabled'</span><span class="p">,</span> <span class="mi">1</span>
</div></div><div data-line='2' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="n">RECONFIGURE</span>  <span class="k">WITH</span> <span class="n">OVERRIDE</span>  </div></div></pre></div></figure></p> <p><strong>Code Snippet 2:</strong> <em>Execute sp_configure</em></p> <p>When you have executed the code as in <em>Code Snippet 2</em>, you might think all is good. Unfortunately it is not, you now have to restart the instance of SQL Server! However, after the restart you can test and see that it works.</p> <h3>Executing R Script</h3> <p>To test it out we will execute a very simple R script:</p> <p><figure class='code-highlight-figure'><figcaption class='code-highlight-caption'><span class='code-highlight-caption-title'>Execution of R Script</span></figcaption><div class='code-highlight'><pre class='code-highlight-pre'><div data-line='1' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="k">EXEC</span> <span class="n">sp_execute_external_script</span>  <span class="o">@</span><span class="k">language</span> <span class="o">=</span><span class="n">N</span><span class="s1">'R'</span><span class="p">,</span>
</div></div><div data-line='2' class='code-highlight-row numbered'><div class='code-highlight-line'>                                 <span class="o">@</span><span class="n">script</span><span class="o">=</span><span class="n">N</span><span class="s1">'OutputDataSet&lt;-InputDataSet'</span><span class="p">,</span>
</div></div><div data-line='3' class='code-highlight-row numbered'><div class='code-highlight-line'>                                 <span class="o">@</span><span class="n">input_data_1</span> <span class="o">=</span><span class="n">N</span><span class="s1">'SELECT 42'</span>
</div></div><div data-line='4' class='code-highlight-row numbered'><div class='code-highlight-line'>      <span class="k">WITH</span> <span class="k">RESULT</span> <span class="k">SETS</span> <span class="p">(([</span><span class="n">TheAnswer</span><span class="p">]</span> <span class="n">int</span> <span class="k">not</span> <span class="k">null</span><span class="p">));</span><br/>
</div></div><div data-line='5' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="k">GO</span> </div></div></pre></div></figure></p> <p><strong>Code Snippet 3:</strong> <em>Test That R Installation Works</em></p> <p>Let's look at the various parts of the code in <em>Code Snippet 3</em>:</p> <ul> <li>We start with the <code>@language</code> parameter. We now know that it should be R.</li> <li>Then we define the <code>@script</code> parameter. This is where our R code will go. In the code we are saying that output data (<code>OutputDataSet</code>) is whatever coming in (<code>InputDataSet</code>).</li> <li>In <code>@inout_data_1</code> we define the input dataset</li> <li>We finally "formats" the output in the <code>WITH RESULT SETS ...</code> part.</li> </ul> <p>When you execute the code, the output should be like so:</p> <p><img class="center" src="/images/posts/r_result_set.png" width="160" height="80" > <strong>Figure 5:</strong> <em>Result of Execution of R Script</em></p> <p>Congratulations, you have now executed R code inside SQL Server. How cool is that?!</p> <p>In future blog-posts we will look at:</p> <ul> <li>How things work under the cover</li> <li>What exactly is <code>sp_execute_external_script</code></li> <li>Some real world examples</li> </ul> <p>If you have comments, questions etc., please comment on this post or <a href="mailto:niels.it.berglund@gmail.com">ping</a> me.</p> <p> <h2>Share this Post:</h2> <a href="https://twitter.com/intent/tweet?url=http://nielsberglund.com/2017/03/04/microsoft-sql-server-2016-r-services-installation/&text=Microsoft SQL Server 2016 R Services Installation&via=nielsberglund" target="_blank">Twitter</a> <a href="https://plus.google.com/share?url=http://www.nielsberglund.com//2017/03/04/microsoft-sql-server-2016-r-services-installation/" onclick="javascript:window.open(this.href,'', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;"> | Google+</a> <a href="https://www.linkedin.com/shareArticle? mini=true &url=http://www.nielsberglund.com/2017/03/04/microsoft-sql-server-2016-r-services-installation/ &title=Microsoft SQL Server 2016 R Services Installation &summary=Blog post: SQL Server R Services series. This first post look at installation of SQL Server R Services. &source=http://www.nielsberglund.com/2017/03/04/microsoft-sql-server-2016-r-services-installation/"> | LinkedIn</a> </p> <!--<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script> http://www.linkedin.com/shareArticle?mini=true&url=<URL>&title=<TITILE>&summary=<DESCRIPTION>&sourc https://www.linkedin.com/shareArticle?mini=true&url=http://nielsberglund.com/2017/03/04/microsoft-sql-server-2016-r-services-installation/ --> <p> <h2>Blog Feed:</h2> To automatically receive more posts like this, please <a href="http://feeds.feedburner.com/manageddata/" target="_blank"> subscribe to my RSS/Atom feed</a> in your feed reader!</p> <br/> <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <!-- Ad2 --> <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-3005153158271538" data-ad-slot="1158080725" data-ad-format="auto"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script> <br/> </div> <div class="related"> <h2>Related Posts</h2> <div class="related-posts"> <h3><a href="/2018/02/25/interesting-stuff-week-8/"> Interesting Stuff - Week 8 <small> (25 Feb 2018)</small> </a></h3> </div> <div class="related-posts"> <h3><a href="/2018/02/18/interesting-stuff-week-7/"> Interesting Stuff - Week 7 <small> (18 Feb 2018)</small> </a></h3> </div> <div class="related-posts"> <h3><a href="/2018/02/11/interesting-stuff-week-6/"> Interesting Stuff - Week 6 <small> (11 Feb 2018)</small> </a></h3> </div> </div> <div id="disqus_thread"></div> <script> var disqus_developer = 1; (function() { /*DON'T EDIT BELOW THIS LINE*/ var d = document, s = d.createElement('script'); s.src = '//manageddata.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript> </div> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-18914734-2', 'auto'); ga('send', 'pageview'); </script> </body> </html>
