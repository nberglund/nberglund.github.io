<!DOCTYPE html> <html lang="en-us"> <head> <link href="http://gmpg.org/xfn/11" rel="profile"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta http-equiv="content-type" content="text/html; charset=utf-8"> <meta name="description" content="More about the launchpad service and RTerm processes in relation to parallelism in SQL Server R Services."> <meta name="keywords" content="SQL Server R Services, SQL Server Machine Learning Services, R, WinDbg, Launchpad, RTerm.exe"/> <!-- Enable responsiveness on mobile devices--> <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"> <title> Microsoft SQL Server R Services - Internals V &middot; Niels Berglund </title> <!-- CSS --> <link rel="stylesheet" href="/public/css/poole.css"> <link rel="stylesheet" href="/public/css/syntax.css"> <link rel="stylesheet" href="/public/css/hyde.css"> <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface"> <!-- Icons --> <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png"> <link rel="shortcut icon" href="/public/favicon.ico"> <!-- RSS --> <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml"> <link href='/stylesheets/all-6937d9aff18f4bd864a4e4772a407120.css' media='all' rel='stylesheet' type='text/css'> <!-- Begin Jekyll SEO tag v2.3.0 --> <title>Microsoft SQL Server R Services - Internals V | Niels Berglund</title> <meta property="og:title" content="Microsoft SQL Server R Services - Internals V" /> <meta name="author" content="nielsb" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="More about the launchpad service and RTerm processes in relation to parallelism in SQL Server R Services." /> <meta property="og:description" content="More about the launchpad service and RTerm processes in relation to parallelism in SQL Server R Services." /> <link rel="canonical" href="http://nielsberglund.com/2017/05/01/microsoft-sql-server-r-services-internals-v/" /> <meta property="og:url" content="http://nielsberglund.com/2017/05/01/microsoft-sql-server-r-services-internals-v/" /> <meta property="og:site_name" content="Niels Berglund" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2017-05-01T15:04:31+02:00" /> <script type="application/ld+json"> {"name":null,"description":"More about the launchpad service and RTerm processes in relation to parallelism in SQL Server R Services.","author":{"@type":"Person","name":"nielsb"},"@type":"BlogPosting","url":"http://nielsberglund.com/2017/05/01/microsoft-sql-server-r-services-internals-v/","publisher":null,"image":null,"headline":"Microsoft SQL Server R Services - Internals V","dateModified":"2017-05-01T15:04:31+02:00","datePublished":"2017-05-01T15:04:31+02:00","sameAs":null,"mainEntityOfPage":{"@type":"WebPage","@id":"http://nielsberglund.com/2017/05/01/microsoft-sql-server-r-services-internals-v/"},"@context":"http://schema.org"}</script> <!-- End Jekyll SEO tag --> <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <script> (adsbygoogle = window.adsbygoogle || []).push({ google_ad_client: "ca-pub-3005153158271538", enable_page_level_ads: true }); </script> </head> <body> <div class="sidebar"> <div class="container"> <div class="sidebar-about"> <h1> <a href="/"> Niels Berglund </a> </h1> <p class="lead">Technology musings about coding and data. Some topics: .NET, SQL Server, Data Science, R, Windows Azure and a lot more.</p> </div> <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <!-- Sidebar_rectangle --> <ins class="adsbygoogle" style="display:inline-block;width:300px;height:250px" data-ad-client="ca-pub-3005153158271538" data-ad-slot="7704601332"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script> <nav class="sidebar-nav"> <a class="sidebar-nav-item" href="/">Home</a> <a class="sidebar-nav-item" href="/about/">About</a> <a class="sidebar-nav-item" href="/archive/">Posts Archive</a> <a class="sidebar-nav-item" href="/categories/">Categories</a> <a class="sidebar-nav-item" href="/disclaimer/">Disclaimer</a> <a class="sidebar-nav-item" href="/tags/">Tags</a> </nav> <img class="center" src="/images/MVP_Logo_large.png" width="300" height="121" > <section> <h3 style="color:#ffffff">Follow Me:</h3> <ul> <li><a href="https://twitter.com/nielsberglund" target="_blank">Twitter</a></li> <li><a href="http://feeds.feedburner.com/manageddata/" target="_blank">RSS/Atom Feed</a></li> </ul> </section> <p>&copy; 2018. All rights reserved.</p> <div class="sidebar-social"> <div><a href="https://github.com/nberglund"> GitHub </a></div> <div><a href="https://twitter.com/nielsberglund"> Twitter </a></div> <div><a href="https://za.linkedin.com/in/niels-berglund-0122593"> LinkedIn </a></div> <div><a href="https://plus.google.com/u/0/109374849138720664008"> Google+ </a></div> </div> </div> </div> <div class="content container"> <div class="post"> <h1 class="post-title">Microsoft SQL Server R Services - Internals V</h1> <div class="post-subheading"> <span class="post-date">01 May 2017</span> <span class="post-tag"> <span class="post-tagdesc">in categories:</span> <a href="/categories/#SQL Server">SQL Server</a> <a href="/categories/#Microsoft R Server">Microsoft R Server</a> <a href="/categories/#Data Science">Data Science</a> <a href="/categories/#SQL Server R Services Series">SQL Server R Services Series</a> <a href="/categories/#SQL Server R Services">SQL Server R Services</a> <a href="/categories/#SQL Server Machine Learning Services">SQL Server Machine Learning Services</a> <span class="post-tagdesc">tags:</span> <a href="/tags/#SQL Server R Services">SQL Server R Services</a> <a href="/tags/#SQL Server Machine Learning Services">SQL Server Machine Learning Services</a> <a href="/tags/#R">R</a> <a href="/tags/#WinDbg">WinDbg</a> <a href="/tags/#Launchpad">Launchpad</a> <a href="/tags/#RTerm.exe">RTerm.exe</a> </span> </div> <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <!-- Ad1 --> <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-3005153158271538" data-ad-slot="6668073777" data-ad-format="auto"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script> <br/> <p>This post is part of a series of blog-posts about Microsoft SQL Server R Services:</p> <ol> <li><a href="/2017/03/04/microsoft-sql-server-2016-r-services-installation/">Microsoft SQL Server 2016 R Services Installation</a></li> <li><a href="/2017/03/18/microsoft-sql-server-r-services-internals-i/">Microsoft SQL Server R Services - Internals I</a></li> <li><a href="/2017/04/02/microsoft-sql-server-r-services-internals-ii/">Microsoft SQL Server R Services - Internals II</a></li> <li><a href="/2017/04/13/microsoft-sql-server-r-services-internals-iii/">Microsoft SQL Server R Services - Internals III</a></li> <li><a href="/2017/04/23/microsoft-sql-server-r-services-internals-iv/">Microsoft SQL Server R Services - Internals IV</a></li> <li>Microsoft SQL Server R Services - Internals V (this post)</li> <li><a href="/2017/05/16/microsoft-sql-server-r-services-internals-vi/">Microsoft SQL Server R Services - Internals VI</a></li> <li><a href="/2017/07/11/microsoft-sql-server-r-services-internals-vii/">Microsoft SQL Server R Services - Internals VII</a></li> <li><a href="/2017/07/22/microsoft-sql-server-r-services-internals-viii/">Microsoft SQL Server R Services - Internals VIII</a></li> <li><a href="/2017/08/18/microsoft-sql-server-r-services-internals-ix/">Microsoft SQL Server R Services - Internals IX</a></li> <li><a href="/2017/08/29/microsoft-sql-server-r-services-internals-x/">Microsoft SQL Server R Services - Internals X</a></li> <li><a href="/2017/10/20/microsoft-sql-server-r-services-internals-xi/">Microsoft SQL Server R Services - Internals XI</a></li> <li><a href="/2017/10/31/microsoft-sql-server-r-services-internals-xii/">Microsoft SQL Server R Services - Internals XII</a></li> <li><a href="/2017/11/11/microsoft-sql-server-r-services-internals-xiii/">Microsoft SQL Server R Services - Internals XIII</a></li> <li><a href="/2017/11/25/microsoft-sql-server-r-services-internals-xiv/">Microsoft SQL Server R Services - Internals XIV</a></li> <li><a href="/2017/12/02/microsoft-sql-server-r-services-internals-xv/">Microsoft SQL Server R Services - Internals XV</a></li> <li><a href="/2017/12/24/microsoft-sql-server-r-services-internals-xvi/">Microsoft SQL Server R Services - Internals XVI</a></li> <li><a href="/2018/01/03/microsoft-sql-server-r-services-internals-xvii/">Microsoft SQL Server R Services - Internals XVII</a></li> <li><a href="/2018/01/10/microsoft-sql-server-r-services-internals-xviii/">Microsoft SQL Server R Services - Internals XVIII</a></li> <li><a href="/2018/01/20/microsoft-sql-server-r-services-internals-xix/">Microsoft SQL Server R Services - Internals XIX</a></li> <li><a href="/2018/02/02/microsoft-sql-server-r-services-internals-xx/">Microsoft SQL Server R Services - Internals XX</a></li> <li><a href="/2018/03/07/microsoft-sql-server-r-services-sp_execute_external_script-I/">Microsoft SQL Server R Services: sp_execute_external_script - I</a></li> <li><a href="/2018/03/11/microsoft-sql-server-r-services-sp-execute-external-script-ii/">Microsoft SQL Server R Services - sp_execute_external_script - II</a></li> <li><a href="/2018/03/21/microsoft-sql-server-r-services-sp-execute-external-script-iii/">Microsoft SQL Server R Services: sp_execute_external_script - III</a> <em>last post in the series</em></li> </ol> <p>This post is the sixth post about Microsoft SQL Server R Services, and the fifth post that drills down into the internal of how it works. In <a href="/2017/04/13/microsoft-sql-server-r-services-internals-iii/">Internals - III</a> and <a href="/2017/04/23/microsoft-sql-server-r-services-internals-iv/">Internals - IV</a>, we looked at how the launchpad service creates <strong>RTerm</strong> processes when we execute an external script.</p> <p>The <a href="/2017/04/23/microsoft-sql-server-r-services-internals-iv/">Internals - IV</a> post came about due to an email from Bob Albright (<a href="https://twitter.com/bob_albright">@bob_albright</a>), pointing me to some resources (a blog-post) regarding the processes the launchpad service creates.</p> <p>In his email Bob also, kindly enough, attached some code. The code highlighted some behavior when creating the RTerm processes, especially around parallelism. In this blog-post we'll follow up on that and look into the effect parallelism has on process creation.</p> <!--more--> <h2>Recap</h2> <p>In <a href="/2017/04/23/microsoft-sql-server-r-services-internals-iv/">Internals - IV</a>, we saw how:</p> <ul> <li>The launchpad service creates by default 6 RTerm processes when an external script is executed by a user. One of the processes will be used for the execution of the script and torn down afterwards. The other 5 is added to the process pool. In essence the launchpad service creates 5 + 1.</li> <li>If more (or less) processes than 5 is needed, a setting <code>PROCESS_POOL_SQLSATELLITE_GROWTH</code> can be set in <code>rlauncher.config</code>. The value of the setting defines number of processes to create (as with default it will be setting value + 1).</li> <li>When a user executes subsequent requests, or concurrent requests from different sessions, processes are picked up and used from the pool. <ul> <li>The launchpad service simultaneously creates a new process.</li> </ul> </li> </ul> <p>Previously I had the assumption that "somehow" the number of processes created had to be configurable, and that the reason for creating multiple processes has to do with performance.</p> <p>In the post we verified that, and this was much due to the <a href="https://blogs.msdn.microsoft.com/microsoftrservertigerteam/2016/09/20/tips-sql-r-services-optimization-for-concurrent-execution-of-in-database-analytics-using-sp_execute_external_script/">blog-post</a> Bob pointed to in his - previously mentioned - email. That particular post also briefly mentioned <code>MAXDOP</code>, and what to think about in terms of pool size. That and Bob's code lead to this blog-post.</p> <h2>Code</h2> <p>Before diving into the "stuff", let's look at the code we'll use. The code we have used in previous posts has been very, very minimal. Today we'll be "very advanced" and select data from a table in a database - talk about cutting edge!! What we want to do is to execute some linear regression functions against data, and see what happens in different scenarios.</p> <p>In <em>Code Snippet 1</em> below, we set up the database and a table with some data we can use, all in all 30 million records:</p> <p><figure class='code-highlight-figure'><figcaption class='code-highlight-caption'><span class='code-highlight-caption-title'>Setup</span></figcaption><div class='code-highlight'><pre class='code-highlight-pre'><div data-line='1' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="n">USE</span> <span class="n">master</span><span class="p">;</span>
</div></div><div data-line='2' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="k">GO</span>
</div></div><div data-line='3' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div><div data-line='4' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="k">SET</span> <span class="n">NOCOUNT</span> <span class="k">ON</span><span class="p">;</span>
</div></div><div data-line='5' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="k">GO</span>
</div></div><div data-line='6' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div><div data-line='7' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="k">DROP</span> <span class="k">DATABASE</span> <span class="n">IF</span> <span class="k">EXISTS</span> <span class="n">TestParallel</span><span class="p">;</span>
</div></div><div data-line='8' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="k">GO</span>
</div></div><div data-line='9' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div><div data-line='10' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="k">CREATE</span> <span class="k">DATABASE</span> <span class="n">TestParallel</span><span class="p">;</span>
</div></div><div data-line='11' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="k">GO</span>
</div></div><div data-line='12' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div><div data-line='13' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="n">USE</span> <span class="n">TestParallel</span><span class="p">;</span>
</div></div><div data-line='14' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="k">GO</span>
</div></div><div data-line='15' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div><div data-line='16' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">IF</span> <span class="k">EXISTS</span> <span class="n">dbo</span><span class="p">.</span><span class="n">rand_30M</span>
</div></div><div data-line='17' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">dbo</span><span class="p">.</span><span class="n">rand_30M</span><span class="p">(</span><span class="n">RowID</span> <span class="n">bigint</span> <span class="k">identity</span> <span class="k">primary</span> <span class="k">key</span><span class="p">,</span> <span class="n">y</span> <span class="n">int</span><span class="p">,</span>
</div></div><div data-line='18' class='code-highlight-row numbered'><div class='code-highlight-line'>                          <span class="n">rand1</span> <span class="n">int</span><span class="p">,</span> <span class="n">rand2</span> <span class="n">int</span><span class="p">,</span> <span class="n">rand3</span> <span class="n">int</span><span class="p">,</span> <span class="n">rand4</span> <span class="n">int</span><span class="p">,</span>
</div></div><div data-line='19' class='code-highlight-row numbered'><div class='code-highlight-line'>                          <span class="n">rand5</span> <span class="n">int</span><span class="p">);</span>
</div></div><div data-line='20' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div><div data-line='21' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">dbo</span><span class="p">.</span><span class="n">rand_30M</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">rand1</span><span class="p">,</span> <span class="n">rand2</span><span class="p">,</span> <span class="n">rand3</span><span class="p">,</span> <span class="n">rand4</span><span class="p">,</span> <span class="n">rand5</span><span class="p">)</span>
</div></div><div data-line='22' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="k">SELECT</span> <span class="n">TOP</span><span class="p">(</span><span class="mi">30000000</span><span class="p">)</span> <span class="k">CAST</span><span class="p">(</span><span class="k">ABS</span><span class="p">(</span><span class="n">CHECKSUM</span><span class="p">(</span><span class="n">NEWID</span><span class="p">()))</span> <span class="o">%</span> <span class="mi">14</span> <span class="k">AS</span> <span class="n">INT</span><span class="p">)</span>
</div></div><div data-line='23' class='code-highlight-row numbered'><div class='code-highlight-line'>  <span class="p">,</span> <span class="k">CAST</span><span class="p">(</span><span class="k">ABS</span><span class="p">(</span><span class="n">CHECKSUM</span><span class="p">(</span><span class="n">NEWID</span><span class="p">()))</span> <span class="o">%</span> <span class="mi">20</span> <span class="k">AS</span> <span class="n">INT</span><span class="p">)</span>
</div></div><div data-line='24' class='code-highlight-row numbered'><div class='code-highlight-line'>  <span class="p">,</span> <span class="k">CAST</span><span class="p">(</span><span class="k">ABS</span><span class="p">(</span><span class="n">CHECKSUM</span><span class="p">(</span><span class="n">NEWID</span><span class="p">()))</span> <span class="o">%</span> <span class="mi">25</span> <span class="k">AS</span> <span class="n">INT</span><span class="p">)</span>
</div></div><div data-line='25' class='code-highlight-row numbered'><div class='code-highlight-line'>  <span class="p">,</span> <span class="k">CAST</span><span class="p">(</span><span class="k">ABS</span><span class="p">(</span><span class="n">CHECKSUM</span><span class="p">(</span><span class="n">NEWID</span><span class="p">()))</span> <span class="o">%</span> <span class="mi">14</span> <span class="k">AS</span> <span class="n">INT</span><span class="p">)</span>
</div></div><div data-line='26' class='code-highlight-row numbered'><div class='code-highlight-line'>  <span class="p">,</span> <span class="k">CAST</span><span class="p">(</span><span class="k">ABS</span><span class="p">(</span><span class="n">CHECKSUM</span><span class="p">(</span><span class="n">NEWID</span><span class="p">()))</span> <span class="o">%</span> <span class="mi">50</span> <span class="k">AS</span> <span class="n">INT</span><span class="p">)</span>
</div></div><div data-line='27' class='code-highlight-row numbered'><div class='code-highlight-line'>  <span class="p">,</span> <span class="k">CAST</span><span class="p">(</span><span class="k">ABS</span><span class="p">(</span><span class="n">CHECKSUM</span><span class="p">(</span><span class="n">NEWID</span><span class="p">()))</span> <span class="o">%</span> <span class="mi">100</span> <span class="k">AS</span> <span class="n">INT</span><span class="p">)</span>
</div></div><div data-line='28' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="k">FROM</span> <span class="n">sys</span><span class="p">.</span><span class="n">objects</span> <span class="n">o1</span>
</div></div><div data-line='29' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="k">CROSS</span> <span class="k">JOIN</span> <span class="n">sys</span><span class="p">.</span><span class="n">objects</span> <span class="n">o2</span>
</div></div><div data-line='30' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="k">CROSS</span> <span class="k">JOIN</span> <span class="n">sys</span><span class="p">.</span><span class="n">objects</span> <span class="n">o3</span>
</div></div><div data-line='31' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="k">CROSS</span> <span class="k">JOIN</span> <span class="n">sys</span><span class="p">.</span><span class="n">objects</span> <span class="n">o4</span><span class="p">;</span>
</div></div><div data-line='32' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="k">GO</span></div></div></pre></div></figure></p> <p><strong>Code Snippet 1:</strong> <em>Setup of Database, Table and Data</em></p> <p>The data is completely "useless", but it can at least be used for analysis work, it looks something like so (just a few rows):</p> <p><img class="center" src="/images/posts/sql_r_services_random_data.png" width="340" height="240" > <strong>Figure 1:</strong> <em>10 Rows Random Data</em></p> <p>What we want to do with the data is to create a linear regression model over it, where - ultimately - we want to predict the value of <code>y</code>, and we believe <code>y</code> is related to <code>rand1</code>, <code>rand2</code>, <code>rand3</code>, <code>rand4</code> and <code>rand5</code>. In our examples we are not really interested in <code>y</code>, but we want to see what the <strong>intercept</strong> value(s) is. If we used open source R (CRAN R), the code for this would look something like so:</p> <p><figure class='code-highlight-figure'><figcaption class='code-highlight-caption'><span class='code-highlight-caption-title'>Linear Regression</span></figcaption><div class='code-highlight'><pre class='code-highlight-pre'><div data-line='1' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="n">r</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">lm</span><span class="p">(</span><span class="n">y</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">rand1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">rand2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">rand3</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">rand4</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">rand5</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="o">=&lt;</span><span class="n">some</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="n">data</span><span class="o">&gt;</span><span class="p">);</span><span class="w">
</div></div><div data-line='2' class='code-highlight-row numbered'><div class='code-highlight-line'></span>
</div></div><div data-line='3' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="c1"># get the coefficients</span><span class="w"></span>
</div></div><div data-line='4' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="n">coef</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">r</span><span class="o">$</span><span class="n">coefficients</span><span class="w">
</div></div><div data-line='5' class='code-highlight-row numbered'><div class='code-highlight-line'></span>
</div></div><div data-line='6' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="c1"># the intercept value is first value in the coefficients vector</span><span class="w"></span>
</div></div><div data-line='7' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="n">icept</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">coef</span><span class="p">[</span><span class="m">1</span><span class="p">];</span><span class="w">
</div></div><div data-line='8' class='code-highlight-row numbered'><div class='code-highlight-line'></span>
</div></div><div data-line='9' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="c1"># return the data</span><span class="w"></span>
</div></div><div data-line='10' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="n">out_data</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">data.frame</span><span class="p">(</span><span class="n">intercept</span><span class="o">=</span><span class="n">icept</span><span class="p">);</span><span class="w"></span></div></div></pre></div></figure></p> <p><strong>Code Snippet 2:</strong> <em>Linear Regression Using CRAN R</em></p> <p>Seeing that this is about SQL Server R Services, we should be using the equivalent RevoScaleR function: <code>rxLinMod</code>: <code>r &lt;- rxLinMod(y ~ rand1 + rand2 + rand3 + rand4 + rand5, data=&lt;some input data&gt;);</code>, and we would execute it from <code>sp_execute_external_script</code>:</p> <p><figure class='code-highlight-figure'><figcaption class='code-highlight-caption'><span class='code-highlight-caption-title'>Execute from SQL Server</span></figcaption><div class='code-highlight'><pre class='code-highlight-pre'><div data-line='1' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="k">DECLARE</span> <span class="o">@</span><span class="k">start</span> <span class="n">datetime2</span> <span class="o">=</span> <span class="n">SYSUTCDATETIME</span><span class="p">();</span>
</div></div><div data-line='2' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="k">EXEC</span> <span class="n">sp_execute_external_script</span>
</div></div><div data-line='3' class='code-highlight-row numbered'><div class='code-highlight-line'>          <span class="o">@</span><span class="k">language</span> <span class="o">=</span> <span class="n">N</span><span class="s1">'R'</span>
</div></div><div data-line='4' class='code-highlight-row numbered'><div class='code-highlight-line'>        <span class="p">,</span> <span class="o">@</span><span class="n">script</span> <span class="o">=</span> <span class="n">N</span><span class="s1">'
</div></div><div data-line='5' class='code-highlight-row numbered'><div class='code-highlight-line'>             #Sys.sleep(30)
</div></div><div data-line='6' class='code-highlight-row numbered'><div class='code-highlight-line'>             pid &lt;- Sys.getpid()
</div></div><div data-line='7' class='code-highlight-row numbered'><div class='code-highlight-line'>             r &lt;- rxLinMod(y ~ rand1 + rand2 + rand3 + rand4 + rand5,
</div></div><div data-line='8' class='code-highlight-row numbered'><div class='code-highlight-line'>                           data=InputDataSet)
</div></div><div data-line='9' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div><div data-line='10' class='code-highlight-row numbered'><div class='code-highlight-line'>             coef &lt;- r$coefficients
</div></div><div data-line='11' class='code-highlight-row numbered'><div class='code-highlight-line'>             icept &lt;- coef</span><span class="se">[</span><span class="s1">1</span><span class="se">]</span><span class="s1">;
</div></div><div data-line='12' class='code-highlight-row numbered'><div class='code-highlight-line'>              OutputDataSet &lt;- data.frame(pid=pid, nRows=r$nValidObs,
</div></div><div data-line='13' class='code-highlight-row numbered'><div class='code-highlight-line'>                                          intercept=icept)'</span>
</div></div><div data-line='14' class='code-highlight-row numbered'><div class='code-highlight-line'>       <span class="p">,</span> <span class="o">@</span><span class="n">input_data_1</span> <span class="o">=</span> <span class="n">N</span><span class="s1">'
</div></div><div data-line='15' class='code-highlight-row numbered'><div class='code-highlight-line'>              SELECT  y, rand1, rand2, rand3,
</div></div><div data-line='16' class='code-highlight-row numbered'><div class='code-highlight-line'>                      rand4, rand5
</div></div><div data-line='17' class='code-highlight-row numbered'><div class='code-highlight-line'>              FROM dbo.rand_30M'</span>
</div></div><div data-line='18' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="k">WITH</span> <span class="k">RESULT</span> <span class="k">SETS</span> <span class="p">((</span><span class="n">pid</span> <span class="n">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span> <span class="n">nRows</span> <span class="n">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span> <span class="n">intercept</span> <span class="n">FLOAT</span> <span class="k">NULL</span><span class="p">)</span>
</div></div><div data-line='19' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="p">);</span>
</div></div><div data-line='20' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="k">SELECT</span> <span class="n">DATEDIFF</span><span class="p">(</span><span class="n">ms</span><span class="p">,</span> <span class="o">@</span><span class="k">start</span><span class="p">,</span> <span class="n">SYSUTCDATETIME</span><span class="p">())</span> <span class="k">AS</span> <span class="n">ElapsedTime</span><span class="p">;</span></div></div></pre></div></figure></p> <p><strong>Code Snippet 3:</strong> <em>Linear Regression in SQL Server</em></p> <p>So the code in <em>Code Snippet 3</em> is what we will "play" around with in this post. Some comments:</p> <ul> <li>First line of the script (the <code>@script</code> parameter) is commented out; <code>Sys.sleep(30)</code>. We'll use it at one stage to be able to look a little bit closer at what is happening.</li> <li>As we did in <a href="/2017/04/23/microsoft-sql-server-r-services-internals-iv/">Internals - IV</a> we grab the process id of the RTerm process the code executes under.</li> <li>In the <code>OutputDataSet</code> variable we output a data-frame consisting of the process id, how many rows we processed and the intercept value.</li> <li>The output data is being presented as a result set, by the <code>WITH RESULT SETS ...</code> statement.</li> <li>Oh, and for "giggles" we check how long the execution takes (first line and last line).</li> </ul> <p>In addition to the code above, we'll also use <a href="https://technet.microsoft.com/en-us/sysinternals/processexplorer.aspx"><strong>Process Explorer</strong></a>, to see how many processes are created as well as memory consumption etc. If you have read <a href="/2017/04/13/microsoft-sql-server-r-services-internals-iii/">Internals - III</a> and <a href="/2017/04/23/microsoft-sql-server-r-services-internals-iv/">Internals - IV</a>, you should be comfortable with <em>Process Explorer</em>.</p> <h2>Parallel Execution</h2> <p>So the blog-post is about what impact parallel processing will have on the process creation, but before we go down that "rabbit" hole, let's see what it looks like during non-parallel execution:</p> <ul> <li>Restart the launchpad service (this is to clean-up any RTerm processes).</li> <li>Navigate to the <code>Launchpad.exe</code> process in <em>Process Explorer</em>.</li> <li>Execute the code in <em>Code Snippet 2</em>.</li> <li>While the code is executing, look in <em>Process Explorer</em> for RTerm processes.</li> </ul> <p>In <em>Process Explorer</em> you should see something similar to this:</p> <p><img class="center" src="/images/posts/sql_r_services_lin_reg1.png" width="414" height="115" > <strong>Figure 1:</strong> <em>Processes from Code Execution</em></p> <p>What you see in <em>Figure 1</em> matches pretty good with what we discussed in <a href="/2017/04/13/microsoft-sql-server-r-services-internals-iii/">Internals - III</a> and <a href="/2017/04/23/microsoft-sql-server-r-services-internals-iv/">Internals - IV</a>; while a single user executes <code>sp_execute_external_script</code> 6 RTerm processes are alive, and one of the processes is the process where the script executes under. In this case it was process id 10120, and we determined that from the CPU value (.32) as well as Private Bytes: 1,023,376 K and Working Set 189,268 K respectively. We can further confirm the process the code executed under by looking at the result coming back:</p> <p><img class="center" src="/images/posts/sql_r_services_lin_reg1_result.png" width="270" height="133" > <strong>Figure 2:</strong> <em>Result from Code Execution</em></p> <p>From <em>Figure 2</em> we can indeed see that the process id was 10120, and that we ran the regression model over 30 million rows. The time it took to execute the code was ~16 seconds. The query plan looks like in <em>Figure 3</em>:</p> <p><img class="center" src="/images/posts/sql_r_services_lin_reg1_result_udx.png" width="520" height="145" > <strong>Figure 3:</strong> <em>Actual Query Plan</em></p> <p>In <em>Figure 3</em> we see how we do clustered index scan for our rows and then hand it over to the UDX operator. The UDX operator comes normally in play when we do XML related processes, but - as we can see - it also comes into the picture for external scripts. It kind of makes sense as it is an <strong>Extended Operator</strong>.</p> <p>This is all well and good, but it is not really anything new from what we discussed in <a href="/2017/04/13/microsoft-sql-server-r-services-internals-iii/">Internals - III</a> and <a href="/2017/04/23/microsoft-sql-server-r-services-internals-iv/">IV</a>.</p> <p>So what about parallel execution? When you read documentation about <strong>SQL Server R Services</strong> it always mentions how efficient it is to execute external scripts as one can utilize SQL's parallelism. How does this work then? In "normal" SQL Server parallelism, SQL Server decides whether to execute a statement in parallel or not, and the <code>MAXDOP</code> setting defines the number of processors the statement will execute on.</p> <p>For <strong>SQL Server R Services</strong> it works in a similar way, except that you have to explicitly say that you want to execute in parallel. To specify parallel execution you use a parameter on the <code>sp_execute_external_script</code> procedure: <code>@parallel</code>. The parameter can either be either 0, no parallelism which is default, or 1.</p> <blockquote><p><strong>NOTE:</strong> Even if you specify that you want to execute in parallel, SQL may choose not to do it.</p></blockquote> <p>So in order to enable parallelism, we need to add the parameter to the stored procedure, and in <em>Code Snippet 4</em> below we have inserted the parameter right after <code>@input_data1</code> parameter:</p> <p><figure class='code-highlight-figure'><figcaption class='code-highlight-caption'><span class='code-highlight-caption-title'>Enable Parallelism</span></figcaption><div class='code-highlight'><pre class='code-highlight-pre'><div data-line='1' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="c1">-- preceding code not shown</span>
</div></div><div data-line='2' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="p">,</span> <span class="o">@</span><span class="n">input_data_1</span> <span class="o">=</span> <span class="n">N</span><span class="s1">'
</div></div><div data-line='3' class='code-highlight-row numbered'><div class='code-highlight-line'>              SELECT  y, rand1, rand2, rand3,
</div></div><div data-line='4' class='code-highlight-row numbered'><div class='code-highlight-line'>                      rand4, rand5
</div></div><div data-line='5' class='code-highlight-row numbered'><div class='code-highlight-line'>              FROM dbo.rand_30M'</span>
</div></div><div data-line='6' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="p">,</span> <span class="o">@</span><span class="n">parallel</span><span class="o">=</span><span class="mi">1</span>
</div></div><div data-line='7' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="k">WITH</span> <span class="k">RESULT</span> <span class="k">SETS</span> <span class="p">((</span><span class="n">pid</span> <span class="n">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span> <span class="n">nRows</span> <span class="n">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span> <span class="n">intercept</span> <span class="n">FLOAT</span> <span class="k">NULL</span><span class="p">)</span>
</div></div><div data-line='8' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="p">);</span>
</div></div><div data-line='9' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="k">SELECT</span> <span class="n">DATEDIFF</span><span class="p">(</span><span class="n">ms</span><span class="p">,</span> <span class="o">@</span><span class="k">start</span><span class="p">,</span> <span class="n">SYSUTCDATETIME</span><span class="p">())</span> <span class="k">AS</span> <span class="n">ElapsedTime</span><span class="p">;</span></div></div></pre></div></figure></p> <p><strong>Code Snippet 4:</strong> <em>Using the @parallel Parameter</em></p> <p>So let's see what impact the change we did in <em>Code Snippet 4</em> has. For now we will not look at the RTerm processes, so you can just execute the code with the <code>@parallel = 1</code> parameter set. On my machine which is a 4 core machine with hyper threading (i.e. 8 processors) and <code>MAXDOP</code> is set to 0 (use all processors), I get the following result when I execute:</p> <p><img class="center" src="/images/posts/sql_r_services_lin_reg2_result.png" width="260" height="270" > <strong>Figure 4:</strong> <em>Result from Parallel Execution</em></p> <p>In <em>Figure 4</em> we see how the results are returned from 8 RTerm process id's. This is to be expected when SQL uses parallelism and <code>MAXDOP</code> is 0. Oh, and BTW - according to people "in the know" you should not have <code>MAXDOP</code> set to 0 if you run on an HT box. <a href="https://www.mssqltips.com/sqlservertip/2650/what-maxdop-setting-should-be-used-for-sql-server/">Here</a> is an article about <code>MAXDOP</code> settings.</p> <p>We also see from <em>Figure 4</em> that we executed in ~8.7 seconds, roughly half the time it took when we didn't use parallelism.</p> <blockquote><p><strong>NOTE:</strong> There is no guarantee that you will improve performance by using parallelism, so it is a good idea to always test against the workloads you are using.</p></blockquote> <p>The query plan from the execution also shows parallelism:</p> <p><img class="center" src="/images/posts/sql_r_services_lin_reg2_qp.png" width="650" height="144" > <strong>Figure 5:</strong> <em>Query Plan With Parallelism</em></p> <p>The interesting part with the query plan, as Bob pointed out to me, is that the UDX operator gets pushed <strong>before</strong> the <em>Parallelism</em> operator.</p> <p>Let us now get back to what we started this with; how parallelism affects process creation. From what we have seen above, we can be fairly certain that 8 processes have been created, but let's make sure that it really happens:</p> <ul> <li>Un-comment the line in the R script saying <code>Sys.sleep(30)</code>. We'll use this pause to be able to closer see what happens.</li> <li>Restart the launchpad service.</li> <li>Navigate to the <code>Launchpad.exe</code> process in <em>Process Explorer</em>.</li> <li>Execute the code.</li> <li>While the code executes look closely at the RTerm processes under the launchpad process in <em>Process Explorer</em>.</li> </ul> <p>On my box the RTerm processes looks like so:</p> <p><img class="center" src="/images/posts/sql_r_services_lin_reg2_processes.png" width="414" height="273" > <strong>Figure 6:</strong> RTerm Processes and Parallelism*</p> <p>From <em>Figure 6</em> we can see how there are 8 executing processes (the outlined rows), and 16 processes altogether. So when executing in parallel, the launchpad service creates two processes for each task, where one of the two processes are used for execution of the R code, and the other is being added to the process pool. The processes that are being used to executed on, are torn down after execution - and left are the ones in the process pool.</p> <p>However if the level of parallelism (tasks) are less than the number of processes to be created, (5 by default or the value of <code>PROCESS_POOL_SQLSATELLITE_GROWTH</code>), then the launchpad service creates as many process as required so that there always is the required number of processes in the pool.</p> <p>An example of this is if <code>PROCESS_POOL_SQLSATELLITE_GROWTH</code> has not been set, and we are working with 5 as default; if the level of parallelism is 4, then 9 processes will be created - 4 for execution, and 5 for the pool.</p> <p>So why would the level of parallelism be less than the required number of processes? Well, we may execute on a box with few processors, maybe not so likely, or <code>MAXDOP</code> is set (see below).</p> <h3>CRAN R Functions</h3> <p>So far we have used RevoScaleR functions in our script code, what happens if we want to use a CRAN R function instead. Something similar to what is in <em>Code Snippet 2</em>? That works fine as well, multiple RTerm processes will process the data. I will not show the code here, but you can easily try it our yourselves.</p> <h2>Max Degree of Parallelism (MAXDOP)</h2> <p>So <code>MAXDOP</code> is a way to indicate to SQL Server how many processors to execute a piece of code on. Or rather, it is a way to limit SQL Server from running a statement over all processors on the box. As this post is not about <code>MAXDOP</code> as such, I won't go into details about it, but if you want to know more <a href="https://blogs.msdn.microsoft.com/arali/2009/11/25/sql-server-max-degree-of-parallelism-maxdop/">here is an MSDN article</a> covering <code>MAXDOP</code>. Anyway, <code>MAXDOP</code> is set on SQL Server instance level, but can also be used as query hint on individual queries.</p> <p>Setting <code>MAXDOP</code> for individual statements also work for the statement used in the <code>@input_data_1</code> parameter on the <code>sp_execute_external_script</code> procedure. So in our code example was can change the <code>@input_data_1</code> parameter to look like so:</p> <p><figure class='code-highlight-figure'><figcaption class='code-highlight-caption'><span class='code-highlight-caption-title'>MAXDOP</span></figcaption><div class='code-highlight'><pre class='code-highlight-pre'><div data-line='1' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="p">,</span> <span class="o">@</span><span class="n">input_data_1</span> <span class="o">=</span> <span class="n">N</span><span class="s1">'
</div></div><div data-line='2' class='code-highlight-row numbered'><div class='code-highlight-line'>              SELECT  y, rand1, rand2, rand3,
</div></div><div data-line='3' class='code-highlight-row numbered'><div class='code-highlight-line'>                      rand4, rand5
</div></div><div data-line='4' class='code-highlight-row numbered'><div class='code-highlight-line'>              FROM dbo.rand_30M OPTION(MAXDOP 4)'</span></div></div></pre></div></figure></p> <p><strong>Code Snippet 5:</strong> <em>Using MAXDOP in SELECT</em></p> <p>The code in <em>Code Snippet 5</em> will now restrict the parallelism to use 4 processors, and results coming back will show 4 different process id's, and - as I mentioned above - during execution there will be 9 RTerm processes created, and when the execution has finished 5 will be in the process pool.</p> <h2>Some Unclear Points</h2> <p>All this seems pretty straight forward, however what is unclear for me is how the interaction between SQL Server and the launchpad service works when executing with parallelism. On the SQL Server side we can see how multiple tasks and workers are invoked when parallelism is in play by executing something like so:</p> <p><figure class='code-highlight-figure'><figcaption class='code-highlight-caption'><span class='code-highlight-caption-title'>Tasks and Workers</span></figcaption><div class='code-highlight'><pre class='code-highlight-pre'><div data-line='1' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="k">DECLARE</span> <span class="o">@</span><span class="n">spid</span> <span class="n">int</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">spid_from_script_execute</span><span class="o">&gt;</span>
</div></div><div data-line='2' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="k">SELECT</span> <span class="n">t</span><span class="p">.</span><span class="n">session_id</span><span class="p">,</span> <span class="n">t</span><span class="p">.</span><span class="n">scheduler_id</span><span class="p">,</span> <span class="n">t</span><span class="p">.</span><span class="n">task_address</span><span class="p">,</span> <span class="n">t</span><span class="p">.</span><span class="n">worker_address</span>
</div></div><div data-line='3' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="k">FROM</span> <span class="n">sys</span><span class="p">.</span><span class="n">dm_os_tasks</span> <span class="n">t</span>
</div></div><div data-line='4' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="k">WHERE</span> <span class="n">t</span><span class="p">.</span><span class="n">session_id</span> <span class="o">=</span> <span class="o">@</span><span class="n">spid</span><span class="p">;</span></div></div></pre></div></figure></p> <p><strong>Code Snippet 6:</strong> <em>Viewing Tasks and Workers When Executing</em></p> <p>To see this:</p> <ol> <li>Open a second query window and copy the code from <em>Code Snippet 6</em> into that window.</li> <li>Replace the <code>&lt;spid_from_script_execute&gt;</code> with the session id (<code>@@SPID</code>) from where you execute <code>sp_execute_external_script</code>.</li> <li>Highlight the <em>Code Snippet 6</em> code in the query window.</li> <li>Execute the <code>sp_execute_external_script</code> code, where <code>@parallel</code> is set to 1.</li> <li>Quickly change over to the other query window and execute the code.</li> </ol> <p>The result from the query window where you execute the code from <em>Code Snippet 6</em> looks something like what you see in <em>Figure 7</em>:</p> <p><img class="center" src="/images/posts/sql_r_services_lin_reg2_tasks.png" width="440" height="220" > <strong>Figure 7:</strong> Tasks, Workers and Schedulers*</p> <p>Ok, we see multiple schedulers, tasks and workers being active when we execute our code, and there is nothing strange in that. Seeing that, I would then have expected that there would be a one-to-one relationship between the tasks and the calls into the launchpad service, but that is not the case.</p> <p>I verified that by "firing up" my trusted debugger <strong>WinDbg</strong> and attached it to the launchpad process, similar to what we did in <a href="/2017/04/02/microsoft-sql-server-r-services-internals-ii/">Internals - II</a>. I then set a breakpoint at <code>launchpad!CLaunchContext::LaunchServTask</code>, and executed the code. My expectation was that I would see how the breakpoint was hit multiple times when I executed with parallelism.</p> <p>That did not happen, the breakpoint was hit once, and that was it. That leaves me with the question how SQL Server interacts with the launchpad service when executing with parallelism. My guess is that when SQL Server calls into the launchpad service, (which we discussed at length in <a href="/2017/03/18/microsoft-sql-server-r-services-internals-i/">Internals - I</a> and <a href="/2017/04/02/microsoft-sql-server-r-services-internals-ii/">II</a>), it tells the launchpad service that this call requires parallelism, and the level of it. But as I said, this is just a guess. Maybe someone out there can clarify what goes on.</p> <h2>Summary</h2> <p>In this post I wanted to look at how parallelism affects the creation of RTerm processes in <strong>SQL Server R Services</strong>. The conclusion is that it does:</p> <ul> <li>When executing with no parallelism, the launchpad service creates 6 processes by default (can be altered by <code>PROCESS_POOL_SQLSATELLITE_GROWTH</code>), and the code runs on one, the others are added to the process pool. When the code has finished executing, the executing process is torn down.</li> <li>When executing under parallelism the launchpad service creates two processes per degree of parallelism. One of the two processes are used to execute on, the other is added to the pool. <ul> <li>If the level of parallelism is lower than default number of process to be created (or <code>PROCESS_POOL_SQLSATELLITE_GROWTH</code>) then the launchpad service creates enough processes to satisfy the required level.</li> </ul> </li> <li>Parallelism works with CRAN R functions as well as RevoScaleR.</li> <li>The <code>MAXDOP</code> setting has impact on the parallelism.</li> </ul> <p>So that's for now! Thanks once again to <a href="https://twitter.com/bob_albright">Bob</a> for his input and code!! And as I mentioned above, if anyone has input how SQL Server interacts with the launchpad service, when parallelism is in play - I'd be more than happy to hear about it.</p> <p>If you have comments, questions etc., please comment on this post or <a href="mailto:niels.it.berglund@gmail.com">ping</a> me.</p> <p> <h2>Share this Post:</h2> <a href="https://twitter.com/intent/tweet?url=http://nielsberglund.com/2017/05/01/microsoft-sql-server-r-services-internals-v/&text=Microsoft SQL Server R Services - Internals V&via=nielsberglund" target="_blank">Twitter</a> <a href="https://plus.google.com/share?url=http://www.nielsberglund.com//2017/05/01/microsoft-sql-server-r-services-internals-v/" onclick="javascript:window.open(this.href,'', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;"> | Google+</a> <a href="https://www.linkedin.com/shareArticle? mini=true &url=http://www.nielsberglund.com/2017/05/01/microsoft-sql-server-r-services-internals-v/ &title=Microsoft SQL Server R Services - Internals V &summary=Blog post: More about the launchpad service and RTerm processes in relation to parallelism in SQL Server R Services. &source=http://www.nielsberglund.com/2017/05/01/microsoft-sql-server-r-services-internals-v/"> | LinkedIn</a> </p> <!--<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script> http://www.linkedin.com/shareArticle?mini=true&url=<URL>&title=<TITILE>&summary=<DESCRIPTION>&sourc https://www.linkedin.com/shareArticle?mini=true&url=http://nielsberglund.com/2017/05/01/microsoft-sql-server-r-services-internals-v/ --> <p> <h2>Blog Feed:</h2> To automatically receive more posts like this, please <a href="http://feeds.feedburner.com/manageddata/" target="_blank"> subscribe to my RSS/Atom feed</a> in your feed reader!</p> <br/> <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <!-- Ad2 --> <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-3005153158271538" data-ad-slot="1158080725" data-ad-format="auto"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script> <br/> </div> <div class="related"> <h2>Related Posts</h2> <div class="related-posts"> <h3><a href="/2018/05/20/sp-execute-external-script-and-sql-compute-context/"> sp_execute_external_script and SQL Compute Context - I <small> (20 May 2018)</small> </a></h3> </div> <div class="related-posts"> <h3><a href="/2018/04/08/sql-server-machine-learning-services-and-extended-events/"> SQL Server Machine Learning Services and Extended Events <small> (08 Apr 2018)</small> </a></h3> </div> <div class="related-posts"> <h3><a href="/2018/03/25/interesting-stuff-week-12/"> Interesting Stuff - Week 12 <small> (25 Mar 2018)</small> </a></h3> </div> </div> <div id="disqus_thread"></div> <script> var disqus_developer = 1; (function() { /*DON'T EDIT BELOW THIS LINE*/ var d = document, s = d.createElement('script'); s.src = '//manageddata.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript> </div> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-18914734-2', 'auto'); ga('send', 'pageview'); </script> </body> </html>
