<!DOCTYPE html> <html lang="en-us"> <head> <link href="http://gmpg.org/xfn/11" rel="profile"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta http-equiv="content-type" content="text/html; charset=utf-8"> <meta name="description" content="SQL Server R Services series. Here we look at what happens when the launchpad service creates processes in SQL Server R Services."> <meta name="keywords" content="SQL Server R Services, SQL Server Machine Learning Services, R, WinDbg, Launchpad, RTerm.exe"/> <!-- Enable responsiveness on mobile devices--> <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"> <title> Microsoft SQL Server R Services - Internals III &middot; Niels Berglund </title> <!-- CSS --> <link rel="stylesheet" href="/public/css/poole.css"> <link rel="stylesheet" href="/public/css/syntax.css"> <link rel="stylesheet" href="/public/css/hyde.css"> <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface"> <!-- Icons --> <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png"> <link rel="shortcut icon" href="/public/favicon.ico"> <!-- RSS --> <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml"> <link href='/stylesheets/all-d361e701e0c0e75e121ac3e901cff1b8.css' media='all' rel='stylesheet' type='text/css'> <!-- Begin Jekyll SEO tag v2.5.0 --> <title>Microsoft SQL Server R Services - Internals III | Niels Berglund</title> <meta name="generator" content="Jekyll v3.8.2" /> <meta property="og:title" content="Microsoft SQL Server R Services - Internals III" /> <meta name="author" content="nielsb" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="SQL Server R Services series. Here we look at what happens when the launchpad service creates processes in SQL Server R Services." /> <meta property="og:description" content="SQL Server R Services series. Here we look at what happens when the launchpad service creates processes in SQL Server R Services." /> <link rel="canonical" href="http://nielsberglund.com/2017/04/13/microsoft-sql-server-r-services-internals-iii/" /> <meta property="og:url" content="http://nielsberglund.com/2017/04/13/microsoft-sql-server-r-services-internals-iii/" /> <meta property="og:site_name" content="Niels Berglund" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2017-04-13T06:13:14+02:00" /> <script type="application/ld+json"> {"@type":"BlogPosting","url":"http://nielsberglund.com/2017/04/13/microsoft-sql-server-r-services-internals-iii/","headline":"Microsoft SQL Server R Services - Internals III","dateModified":"2017-04-13T06:13:14+02:00","datePublished":"2017-04-13T06:13:14+02:00","author":{"@type":"Person","name":"nielsb"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://nielsberglund.com/2017/04/13/microsoft-sql-server-r-services-internals-iii/"},"description":"SQL Server R Services series. Here we look at what happens when the launchpad service creates processes in SQL Server R Services.","@context":"http://schema.org"}</script> <!-- End Jekyll SEO tag --> <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <script> (adsbygoogle = window.adsbygoogle || []).push({ google_ad_client: "ca-pub-3005153158271538", enable_page_level_ads: true }); </script> </head> <body> <div class="sidebar"> <div class="container"> <div class="sidebar-about"> <h1> <a href="/"> Niels Berglund </a> </h1> <p class="lead">Technology musings about coding and data. Some topics: .NET, SQL Server, Data Science, R, Windows Azure and a lot more.</p> </div> <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <!-- Sidebar_rectangle --> <ins class="adsbygoogle" style="display:inline-block;width:300px;height:250px" data-ad-client="ca-pub-3005153158271538" data-ad-slot="7704601332"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script> <nav class="sidebar-nav"> <a class="sidebar-nav-item" href="/">Home</a> <a class="sidebar-nav-item" href="/about/">About</a> <a class="sidebar-nav-item" href="/archive/">Posts Archive</a> <a class="sidebar-nav-item" href="/categories/">Categories</a> <a class="sidebar-nav-item" href="/disclaimer/">Disclaimer</a> <a class="sidebar-nav-item" href="/series/">Blog Post Series</a> <a class="sidebar-nav-item" href="/tags/">Tags</a> </nav> <img class="center" src="/images/MVP_Logo_large.png" width="300" height="121" > <section> <h3 style="color:#ffffff">Follow Me:</h3> <ul> <li><a href="https://twitter.com/nielsberglund" target="_blank">Twitter</a></li> <li><a href="http://feeds.feedburner.com/manageddata/" target="_blank">RSS/Atom Feed</a></li> </ul> </section> <p>&copy; 2018. All rights reserved.</p> <div class="sidebar-social"> <div><a href="https://github.com/nberglund"> GitHub </a></div> <div><a href="https://twitter.com/nielsberglund"> Twitter </a></div> <div><a href="https://za.linkedin.com/in/niels-berglund-0122593"> LinkedIn </a></div> <div><a href="https://plus.google.com/u/0/109374849138720664008"> Google+ </a></div> </div> </div> </div> <div class="content container"> <div class="post"> <h1 class="post-title">Microsoft SQL Server R Services - Internals III</h1> <div class="post-subheading"> <span class="post-date">13 Apr 2017</span> <span class="post-tag"> <span class="post-tagdesc">in categories:</span> <a href="/categories/#SQL Server">SQL Server</a> <a href="/categories/#Microsoft R Server">Microsoft R Server</a> <a href="/categories/#Data Science">Data Science</a> <a href="/categories/#SQL Server R Services Series">SQL Server R Services Series</a> <a href="/categories/#SQL Server R Services">SQL Server R Services</a> <a href="/categories/#SQL Server Machine Learning Services">SQL Server Machine Learning Services</a> <span class="post-tagdesc">tags:</span> <a href="/tags/#SQL Server R Services">SQL Server R Services</a> <a href="/tags/#SQL Server Machine Learning Services">SQL Server Machine Learning Services</a> <a href="/tags/#R">R</a> <a href="/tags/#WinDbg">WinDbg</a> <a href="/tags/#Launchpad">Launchpad</a> <a href="/tags/#RTerm.exe">RTerm.exe</a> </span> </div> <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <!-- Ad1 --> <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-3005153158271538" data-ad-slot="6668073777" data-ad-format="auto"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script> <br/> <p>This post is part of a series of blog-posts about Microsoft SQL Server R Services:</p> <ol> <li><a href="/2017/03/04/microsoft-sql-server-2016-r-services-installation/">Microsoft SQL Server 2016 R Services Installation</a></li> <li><a href="/2017/03/18/microsoft-sql-server-r-services-internals-i/">Microsoft SQL Server R Services - Internals I</a></li> <li><a href="/2017/04/02/microsoft-sql-server-r-services-internals-ii/">Microsoft SQL Server R Services - Internals II</a></li> <li>Microsoft SQL Server R Services - Internals III (this post)</li> <li><a href="/2017/04/23/microsoft-sql-server-r-services-internals-iv/">Microsoft SQL Server R Services - Internals IV</a></li> <li><a href="/2017/05/01/microsoft-sql-server-r-services-internals-v/">Microsoft SQL Server R Services - Internals V</a></li> <li><a href="/2017/05/16/microsoft-sql-server-r-services-internals-vi/">Microsoft SQL Server R Services - Internals VI</a></li> <li><a href="/2017/07/11/microsoft-sql-server-r-services-internals-vii/">Microsoft SQL Server R Services - Internals VII</a></li> <li><a href="/2017/07/22/microsoft-sql-server-r-services-internals-viii/">Microsoft SQL Server R Services - Internals VIII</a></li> <li><a href="/2017/08/18/microsoft-sql-server-r-services-internals-ix/">Microsoft SQL Server R Services - Internals IX</a></li> <li><a href="/2017/08/29/microsoft-sql-server-r-services-internals-x/">Microsoft SQL Server R Services - Internals X</a></li> <li><a href="/2017/10/20/microsoft-sql-server-r-services-internals-xi/">Microsoft SQL Server R Services - Internals XI</a></li> <li><a href="/2017/10/31/microsoft-sql-server-r-services-internals-xii/">Microsoft SQL Server R Services - Internals XII</a></li> <li><a href="/2017/11/11/microsoft-sql-server-r-services-internals-xiii/">Microsoft SQL Server R Services - Internals XIII</a></li> <li><a href="/2017/11/25/microsoft-sql-server-r-services-internals-xiv/">Microsoft SQL Server R Services - Internals XIV</a></li> <li><a href="/2017/12/02/microsoft-sql-server-r-services-internals-xv/">Microsoft SQL Server R Services - Internals XV</a></li> <li><a href="/2017/12/24/microsoft-sql-server-r-services-internals-xvi/">Microsoft SQL Server R Services - Internals XVI</a></li> <li><a href="/2018/01/03/microsoft-sql-server-r-services-internals-xvii/">Microsoft SQL Server R Services - Internals XVII</a></li> <li><a href="/2018/01/10/microsoft-sql-server-r-services-internals-xviii/">Microsoft SQL Server R Services - Internals XVIII</a></li> <li><a href="/2018/01/20/microsoft-sql-server-r-services-internals-xix/">Microsoft SQL Server R Services - Internals XIX</a></li> <li><a href="/2018/02/02/microsoft-sql-server-r-services-internals-xx/">Microsoft SQL Server R Services - Internals XX</a></li> <li><a href="/2018/03/07/microsoft-sql-server-r-services-sp_execute_external_script-I/">Microsoft SQL Server R Services: sp_execute_external_script - I</a></li> <li><a href="/2018/03/11/microsoft-sql-server-r-services-sp-execute-external-script-ii/">Microsoft SQL Server R Services - sp_execute_external_script - II</a></li> <li><a href="/2018/03/21/microsoft-sql-server-r-services-sp-execute-external-script-iii/">Microsoft SQL Server R Services: sp_execute_external_script - III</a> <em>last post in the series</em></li> </ol> <p>This post is the fourth post about Microsoft SQL Server R Services, and the third post that drills down into the internal of how it works. In the previous internals posts <a href="/2017/03/18/microsoft-sql-server-r-services-internals-i/">here</a> and <a href="/2017/04/02/microsoft-sql-server-r-services-internals-ii/">here</a> we have looked at what goes on inside SQL Server when executing an R script, and what happens in the launchpad service when executing.</p> <p>This post was initially to be about the R runtime, and what other parts are involved when executing R scripts in SQL Server. However, during my "spelunking" around I realized that I did not really understand what happens when we create the processes for the R runtime from the launchpad service and the launcher (which is what I covered in the <a href="/2017/04/02/microsoft-sql-server-r-services-internals-ii/">internals II post</a>).</p> <p>So, instead of looking at the R runtime and the other R related components, we'll look at what happens when creating external processes. A subsequent blog-post will cover the R runtime and components.</p> <!--more--> <p>To begin with, the code we use in this post to execute R scripts are the same as we have used in the other posts:</p> <p><figure class='code-highlight-figure'><figcaption class='code-highlight-caption'><span class='code-highlight-caption-title'>Execution of Procedure</span></figcaption><div class='code-highlight'><pre class='code-highlight-pre'><div data-line='1' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="k">EXEC</span> <span class="n">sp_execute_external_script</span>
</div></div><div data-line='2' class='code-highlight-row numbered'><div class='code-highlight-line'>                    <span class="o">@</span><span class="k">language</span> <span class="o">=</span><span class="n">N</span><span class="s1">'R'</span><span class="p">,</span>
</div></div><div data-line='3' class='code-highlight-row numbered'><div class='code-highlight-line'>                    <span class="o">@</span><span class="n">script</span><span class="o">=</span><span class="n">N</span><span class="s1">'OutputDataSet&lt;-InputDataSet'</span><span class="p">,</span>
</div></div><div data-line='4' class='code-highlight-row numbered'><div class='code-highlight-line'>                    <span class="o">@</span><span class="n">input_data_1</span> <span class="o">=</span><span class="n">N</span><span class="s1">'SELECT 42'</span>
</div></div><div data-line='5' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="k">WITH</span> <span class="k">RESULT</span> <span class="k">SETS</span> <span class="p">(([</span><span class="n">TheAnswer</span><span class="p">]</span> <span class="n">int</span> <span class="k">not</span> <span class="k">null</span><span class="p">));</span>
</div></div><div data-line='6' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="k">GO</span></div></div></pre></div></figure></p> <p><strong>Code Snippet 1:</strong> <em>Execute sp_execute_external_script</em></p> <p>The code in <em>Code Snippet 1</em> doesn't do much, but it is quite sufficient for our purposes. Having said that, let us get on with it.</p> <h2>Recap</h2> <p>Let us refresh our memories about what the two previous internals posts covered, by looking at some images from those two posts. In <a href="/2017/03/18/microsoft-sql-server-r-services-internals-i/">internals I</a> we said that the following happened when executing what <em>Code Snippet 1</em> shows:</p> <p><img class="center" src="/images/posts/sql-launchpad_post.png" width="650" height="241" > <strong>Figure 1:</strong> <em>Call Flow Executing sp_execute_external_script</em></p> <p>In <em>Figure 1</em> we see how an named pipe connection is opened from the SQL Server engine into the launchpad service, and eventually the routine <code>sqllang!CSQLSatelliteConnection::WriteMessage</code> writes a message to the service. The message will at one stage or another cause the <code>launchpad!CLaunchContext::Launch</code> routine in the launchpad service to be called.</p> <p><em>Figure 2</em> below, from the <a href="/2017/04/02/microsoft-sql-server-r-services-internals-ii/">internals II</a> shows the flow the call in <em>Figure 1</em> enters the launchpad service:</p> <p><img class="center" src="/images/posts/sql-launchpad-r-post.png" width="650" height="325" > <strong>Figure 2:</strong> <em>Launchpad Service Call Flow</em></p> <p>Various routines are called, and eventually <code>launchpad!PhysicalUserContext::LaunchProcess</code> is called followed by <code>KERNELBASE!CreateProcessInternalW</code> which creates the <em>RTerm.exe</em> process, which you can see in <em>Figure 3</em>. The script to be executed is sent to the R process in the <code>launchpad!CSQLSatelliteConnection::WriteMessage</code> call.</p> <p>In the beginning of this post I mentioned that I had changed what to cover in this post, and what you see in <em>Figure 3</em> is partly why I did that:</p> <p><img class="center" src="/images/posts/sql_r_services_launchpad_after_launch_process.png" width="275" height="229" > <strong>Figure 3:</strong> <em>RTerm Process</em></p> <p>We see a number of RTerm processes, why is that? Let us see if we can answer that question as well as see what happens when we create the processes as well as when the R script code executes. To understand how that works we should however first talk about users and user accounts.</p> <h2>User Accounts</h2> <p>When we execute something in SQL Server we do it in context of a user, either a SQL Server user or Windows user, and SQL Server has the concept of <code>ISOLATION LEVELS</code> to ensure that the same code can be executed concurrently. When we execute <code>sp_execute_external_script</code> however, we exit SQL Server and the actual execution takes place outside of the SQL Server engine; inside the external runtime. The external engine does not have the notion of <code>ISOLATION LEVELS</code>, so if multiple users executed the same script concurrently, bad things could potentially happen. How can we ensure isolation between users executing concurrently?</p> <p>To ensure isolation, SQL Server R Services creates during installation a pool of Windows accounts in a Windows account group. The group (and accounts) are created per instance of SQL Server R Service. The group for SQL Server R Services installed on the default SQL Server instance is <strong>SQLRUserGroup</strong> and for non-default instances it is <strong>SQLRUserGroupInstanceName</strong>. On my machine I have three installations of SQL Server, with SQL Server R Services installed on all of them, and <em>Figure 4</em> shows the groups that have been created:</p> <p><img class="center" src="/images/posts/sql_r_services_usergroups.png" width="590" height="228" > <strong>Figure 4:</strong> <em>SQL Server R Services User Groups</em></p> <p>So what does a user group look like then? If we double click on the <strong>SQLRUserGroup</strong>, we'll see something like so:</p> <p><img class="center" src="/images/posts/sql_r_services_usergroup_users.png" width="389" height="367" > <strong>Figure 5:</strong> <em>Members in User Group</em></p> <p>The installation of SQL Server R Services creates by default 20 user accounts, named MSSQLSERVER01...20 for the default instance, and InstanceName01...20 for named instances. When executing external scripts the executing user will be mapped to one of these accounts by the launchpad service.</p> <blockquote><p><strong>NOTE:</strong> The number of accounts created can be altered. See this <a href="https://docs.microsoft.com/en-us/sql/advanced-analytics/r-services/modify-the-user-account-pool-for-sql-server-r-services">MSDN post</a> for information about that.</p></blockquote> <p>While executing external scripts, there may be a need to store script objects, intermediate results, etc. For this reason the installation of SQL Server R Services not only creates the user accounts as per above, but it also creates folders for each account where to store the objects, results etc. The folders are created at: <code>C:\&lt;path_to_sql_server_instance&gt;\MSSQL\ExtensibilityData</code>, and are named as the user account. In <em>Figure 6</em> below you see an example of this:</p> <p><img class="center" src="/images/posts/sql_r_services_userfolders.png" width="620" height="220" > <strong>Figure 6:</strong> <em>Folders for User Accounts</em></p> <p>It is not entirely correct to say that the files, results, etc., are stored directly in the user folder. They are in fact stored in sub-folders of the user folder. Let us do some coding to see an example of the mapping to a user account as well as sub-folders:</p> <ol> <li>Stop the launchpad service if it is running.</li> <li>Delete any sub folders of the user account folders in the <code>C:\&lt;path_to_sql_server_instance&gt;\MSSQL\ExtensibilityData</code> directory. Do NOT delete the user account folders themselves.</li> <li>Restart the launchpad service.</li> <li>Execute the code in <em>Code Snippet 1</em>.</li> </ol> <p>When you have executed go to the <code>C:\&lt;path_to_sql_server_instance&gt;\MSSQL\ExtensibilityData</code> directory and check in the various user account folders. If you are the only user on the server, you should now see in the <em>xxx01</em> folder some sub-folders as in <em>Figure 7</em> below:</p> <p><img class="center" src="/images/posts/sql_r_services_subfolders.png" width="602" height="209" > <strong>Figure 7:</strong> <em>Sub-folders of the User Account Folder</em></p> <p>If two SQL Server users had executed scripts concurrently two of the user folders would have had sub-folders. If you open one of the sub-folder you should see some files and a folder. This comes from what we mentioned above, about storage of files etc.</p> <p>The question is why are there more than one sub-folder, since we only executed the code once? The same question can be asked when you look at <em>Figure 3</em>, the RTerm processes; why do we have more than one RTerm process for one execution? The other question to ask is if the multiple RTerm processes are related to the multiple sub-folders? We can probably guess that is the case, but can we prove it?</p> <blockquote><p><strong>NOTE:</strong> Ina future blog-post I'll look into what the files are that are stored in the sub-folders.</p></blockquote> <h2>RTerm Processes</h2> <p>The assumption is that there is something in common between the user account's sub-folders and the multiple RTerm processes we saw in <em>Figure 3</em>. Let us execute some code and see if we can figure out if our assumption is right. For this we should change the code in <em>Code Snippet 1</em> slightly, to inject an artificial pause in the execution. That way it should be easier for us to see what is going on. The code to execute now looks like so:</p> <p><figure class='code-highlight-figure'><figcaption class='code-highlight-caption'><span class='code-highlight-caption-title'>Script with Pause</span></figcaption><div class='code-highlight'><pre class='code-highlight-pre'><div data-line='1' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="k">EXEC</span> <span class="n">sp_execute_external_script</span>
</div></div><div data-line='2' class='code-highlight-row numbered'><div class='code-highlight-line'>                    <span class="o">@</span><span class="k">language</span> <span class="o">=</span><span class="n">N</span><span class="s1">'R'</span><span class="p">,</span>
</div></div><div data-line='3' class='code-highlight-row numbered'><div class='code-highlight-line'>                    <span class="o">@</span><span class="n">script</span><span class="o">=</span><span class="n">N</span><span class="s1">'OutputDataSet&lt;-InputDataSet;
</div></div><div data-line='4' class='code-highlight-row numbered'><div class='code-highlight-line'>                              Sys.sleep(120);'</span><span class="p">,</span>
</div></div><div data-line='5' class='code-highlight-row numbered'><div class='code-highlight-line'>                    <span class="o">@</span><span class="n">input_data_1</span> <span class="o">=</span><span class="n">N</span><span class="s1">'SELECT 42'</span>
</div></div><div data-line='6' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="k">WITH</span> <span class="k">RESULT</span> <span class="k">SETS</span> <span class="p">(([</span><span class="n">TheAnswer</span><span class="p">]</span> <span class="n">int</span> <span class="k">not</span> <span class="k">null</span><span class="p">));</span></div></div></pre></div></figure></p> <p><strong>Code Snippet 2:</strong> <em>Execute with Sys.Sleep</em></p> <p>As you can see in <em>Figure 2</em>, the code looks almost the same as in <em>Code Snippet 1</em>, apart from that we have injected a <code>Sys.sleep(120)</code>, which will make the execution stop for 2 minutes. That should give us ample time to do some "spelunking".</p> <blockquote><p><strong>NOTE:</strong> For this investigation I use <strong>Sysinternals</strong> <a href="https://technet.microsoft.com/en-us/sysinternals/processexplorer.aspx"><em>Process Explorer</em></a>.</p></blockquote> <p>So:</p> <ol> <li>Stop the launchpad service.</li> <li>Delete any sub folders of the user account folders in the <code>C:\&lt;path_to_sql_server_instance&gt;\MSSQL\ExtensibilityData</code> directory. Do <strong>NOT</strong> delete the user account folders themselves. Keep the <em>File Explorer</em> open at the <code>ExtensibilityData</code> directory.</li> <li>Restart the launchpad service.</li> <li>Start <em>Process Explorer</em>, order by Process, and scroll down to where you see process names starting with "RT" (on my box there are none at this stage), or where the processes should be. <ul> <li>If you at this stage see RTerm, restart the launchpad service again and kill those processes.</li> </ul> </li> <li>Execute the code in <em>Code Snippet 2</em>.</li> </ol> <p>While the code is running, take a quick look in <em>Process Explorer</em>, and you should see something like so:</p> <p><img class="center" src="/images/posts/sql-launchpad-rterm_processes.png" width="583" height="100" > <strong>Figure 8:</strong> <em>RTerm Processes</em></p> <p>You will see multiple RTerm processes running, quickly right click on each of them and you'll see some properties like in the figure below:</p> <p><img class="center" src="/images/posts/sql-launchpad-rterm_properties.png" width="650" height="125" > <strong>Figure 9:</strong> <em>RTerm Process Properties</em></p> <p>When you look in the properties pop-up window, you can see the part highlighted in <em>Figure 9</em>, is actually the path and folder name of one of the sub-folders of the user account:</p> <p><img class="center" src="/images/posts/sql_r_services_rterm_subfolders.png" width="605" height="201" > <strong>Figure 10:</strong> <em>User Account Sub-folders</em></p> <p><em>Figure 10</em> is just to prove that the above is correct. So it seems that our assumption was correct and that there is a one-to-one relationship between the RTerm processes and the sub-folders.</p> <p>It looks like we have answered the question above about correlation between the sub-folders and the RTerm processes, but what about the question why? Well, in my opinion it is for performance reasons. By having a pool of processes for a user, it should be quicker to to execute multiple scripts: a new process does not have to be "spun up" for the execution but can be taken from the process pool.</p> <p>So how does this work under the covers?</p> <h3>Process Pools</h3> <p>In the <a href="/2017/04/02/microsoft-sql-server-r-services-internals-ii/">internals II post</a> I covered how an external runtime is launched. However we are not launching a runtime as such, we are launching multiple runtime processes (in this case <code>RTerm.exe</code>). So even if the <a href="/2017/04/02/microsoft-sql-server-r-services-internals-ii/">previous post</a> is correct, there are more things going on that what was covered there, and that is related to the multiple processes and the process pool I mentioned above. The way I came across this was due to me pondering why there are multiple RTerm processes launched, and if there was any logic behind the number. I quite often saw 5 processes, and 5 or 6 sub-folders.</p> <p>My initial thought was that this is stored in some config file, and the obvious file would be for the launcher(s), and we looked at this file in the previous post:</p> <p><img class="center" src="/images/posts/sql_r_services_rlauncher_config.png" width="617" height="213" > <strong>Figure 11:</strong> <em>RLauncher Configuration</em></p> <p>However, the file doesn't contain that much, and nothing that seems to relate to number of processes. There is the <code>USER_POOL_SIZE</code> setting, but it is set to 0, so I guess it is not that. When looking at the file, I saw the <code>TRACE_LEVEL</code> setting, and I browsed through the web and came across <a href="https://docs.microsoft.com/en-us/sql/advanced-analytics/r-services/configure-and-manage-advanced-analytics-extensions">this post</a>, which briefly discusses <code>rlauncher.config</code>, In that post they mention the <code>TRACE_LEVEL</code> setting which is used to configure the trace verbosity level of the launchpad service, and the traces stored in the log file for the launchers:</p> <ul> <li>1 = Error (default)</li> <li>2 = Performance</li> <li>3 = Warning</li> <li>4 = Information</li> </ul> <p>Maybe if we change the <code>TRACE_LEVEL</code> to 4, we'd be able to get more information. I stopped the launchpad service, and opened the config file as an administrator and changed the <code>TRACE_LEVEL</code> to 4, and saved it. I then deleted all log files in the <code>C:\&lt;path_to_slq_server_instance&gt;\MSSQL\Log\ExtensibilityLog</code>, and restarted the launchpad service.</p> <p>When opening the <code>rlauncher.log</code> file, there is quite a lot if interesting information, and in the code snippet below I have selected out some of the more interesting bits and pieces:</p> <p><figure class='code-highlight-figure'><figcaption class='code-highlight-caption'><span class='code-highlight-caption-title'>Log</span></figcaption><div class='code-highlight'><pre class='code-highlight-pre'><div data-line='1' class='code-highlight-row numbered'><div class='code-highlight-line'>[2017-04-09 05:37:50.253]
</div></div><div data-line='2' class='code-highlight-row numbered'><div class='code-highlight-line'> # "stuff" from config
</div></div><div data-line='3' class='code-highlight-row numbered'><div class='code-highlight-line'> File=C:\&lt;path_to_sql_server_Instance>\MSSQL\Binn\rlauncher.config
</div></div><div data-line='4' class='code-highlight-row numbered'><div class='code-highlight-line'> RHome=C:\&lt;path_to_sql_server_Instance>\R_SERVICES
</div></div><div data-line='5' class='code-highlight-row numbered'><div class='code-highlight-line'> MpiHome=C:\Program Files\Microsoft MPI
</div></div><div data-line='6' class='code-highlight-row numbered'><div class='code-highlight-line'> InstanceName=MSSQLSERVER
</div></div><div data-line='7' class='code-highlight-row numbered'><div class='code-highlight-line'> LogDirectory=
</div></div><div data-line='8' class='code-highlight-row numbered'><div class='code-highlight-line'>      C:\&lt;path_to_sql_server_Instance>\MSSQL\LOG\ExtensibilityLog
</div></div><div data-line='9' class='code-highlight-row numbered'><div class='code-highlight-line'> WorkingDirectory=C:\PROGRA~1\MICROS~2\MSSQL1~1.MSS\MSSQL\EXTENS~1
</div></div><div data-line='10' class='code-highlight-row numbered'><div class='code-highlight-line'> WorkingDirectoryLongPath=
</div></div><div data-line='11' class='code-highlight-row numbered'><div class='code-highlight-line'>      C:\&lt;path_to_sql_server_Instance>\MSSQL\ExtensibilityData
</div></div><div data-line='12' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div><div data-line='13' class='code-highlight-row numbered'><div class='code-highlight-line'> 1.
</div></div><div data-line='14' class='code-highlight-row numbered'><div class='code-highlight-line'> SqlSatellitePath=
</div></div><div data-line='15' class='code-highlight-row numbered'><div class='code-highlight-line'>      C:\&lt;path_to_sql_server_Instance>\MSSQL\Binn\sqlsatellite.dll
</div></div><div data-line='16' class='code-highlight-row numbered'><div class='code-highlight-line'> SqlSatelliteRPath=
</div></div><div data-line='17' class='code-highlight-row numbered'><div class='code-highlight-line'>      C:\&lt;path_to_sql_server_Instance>\MSSQL\Binn\sqlsatellite.dll
</div></div><div data-line='18' class='code-highlight-row numbered'><div class='code-highlight-line'> SqlSatelliteDirectory=C:\&lt;path_to_sql_server_Instance>\MSSQL\Binn
</div></div><div data-line='19' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div><div data-line='20' class='code-highlight-row numbered'><div class='code-highlight-line'> 2.
</div></div><div data-line='21' class='code-highlight-row numbered'><div class='code-highlight-line'> ProcessPoolingEnabled=1
</div></div><div data-line='22' class='code-highlight-row numbered'><div class='code-highlight-line'> ProcessRecycleEnabled=0
</div></div><div data-line='23' class='code-highlight-row numbered'><div class='code-highlight-line'> StaleProcessTime=300000 msecs
</div></div><div data-line='24' class='code-highlight-row numbered'><div class='code-highlight-line'> StaleProcessPollTime=60000 msecs
</div></div><div data-line='25' class='code-highlight-row numbered'><div class='code-highlight-line'> TelemetryFlushInterval=300000
</div></div><div data-line='26' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div><div data-line='27' class='code-highlight-row numbered'><div class='code-highlight-line'> 3.
</div></div><div data-line='28' class='code-highlight-row numbered'><div class='code-highlight-line'> ProcessPoolSqlSatelliteGrowth=5
</div></div><div data-line='29' class='code-highlight-row numbered'><div class='code-highlight-line'> ProcessPoolRxJobGrowth=3</div></div></pre></div></figure></p> <p><strong>Code Snippet 3:</strong> <em>Excerpt from rlauncher.log</em></p> <p>So, some comments about the above:</p> <ol> <li>We have some log entries about <strong>SqlSatellite</strong>. This is an API to support external code and external run times. We will see more about it in later blog-posts.</li> <li>Process pooling, settings if it is enabled and when a process is considered stale. In this case a process is considered stale after 5 minutes of inactivity, and we poll every minute against the processes.</li> <li>Aha, settings about size of the pool.</li> </ol> <p>From the above we can see that the number of processes are not a random number. I still can't find where the actual number is stored, so my assumption is that it is hard coded into respective launcher.</p> <p>If you remember from the <a href="/2017/04/02/microsoft-sql-server-r-services-internals-ii/">internal II post</a>, I said that I believe that the launcher(s) are loaded when the launchpad service starts up. At the end of the log-file we see some entries that points to that as well:</p> <p><figure class='code-highlight-figure'><figcaption class='code-highlight-caption'><span class='code-highlight-caption-title'>Log</span></figcaption><div class='code-highlight'><pre class='code-highlight-pre'><div data-line='1' class='code-highlight-row numbered'><div class='code-highlight-line'>SQLSatellite_InitLauncher(600000, 1, 1,
</div></div><div data-line='2' class='code-highlight-row numbered'><div class='code-highlight-line'>    C:\&lt;path_to_sql_server_Instance>\MSSQL\LOG\ExtensibilityLog,
</div></div><div data-line='3' class='code-highlight-row numbered'><div class='code-highlight-line'>    C:\&lt;path_to_sql_server_Instance>\MSSQL\Binn\sqlsatellite.dll,
</div></div><div data-line='4' class='code-highlight-row numbered'><div class='code-highlight-line'>    C:\&lt;path_to_sql_server_Instance>\MSSQL\ExtensibilityData)
</div></div><div data-line='5' class='code-highlight-row numbered'><div class='code-highlight-line'>    completed: 00000000
</div></div><div data-line='6' class='code-highlight-row numbered'><div class='code-highlight-line'>&lt; SQLSatellite_InitLauncher, dllmain.cpp, 157 (4 msecs)
</div></div><div data-line='7' class='code-highlight-row numbered'><div class='code-highlight-line'>> SQLSatellite_RegisterLaunchContext, dllmain.cpp, 209
</div></div><div data-line='8' class='code-highlight-row numbered'><div class='code-highlight-line'>    SQLSatellite_RegisterLaunchContext(000000664E9FF750)
</div></div><div data-line='9' class='code-highlight-row numbered'><div class='code-highlight-line'>               completed: 00000000
</div></div><div data-line='10' class='code-highlight-row numbered'><div class='code-highlight-line'>&lt; SQLSatellite_RegisterLaunchContext, dllmain.cpp, 209 (0 msecs)
</div></div><div data-line='11' class='code-highlight-row numbered'><div class='code-highlight-line'>> SQLSatellite_GetSupportedScriptTypes, dllmain.cpp, 107
</div></div><div data-line='12' class='code-highlight-row numbered'><div class='code-highlight-line'>    SQLSatellite_GetSupportedScriptTypes(1) completed: 00000000
</div></div><div data-line='13' class='code-highlight-row numbered'><div class='code-highlight-line'>&lt; SQLSatellite_GetSupportedScriptTypes, dllmain.cpp, 107 (0 msecs)</div></div></pre></div></figure></p> <p><strong>Code Snippet 4:</strong> <em>Initialization of Launcher(s)</em></p> <p>The way I read what is in <em>Code Snippet 4</em> is that at the very end of the launchpad service startup, launchers are initialized, and information about what script types are supported is retrieved.</p> <p>We have now seen what happens when the launchpad service is started, and have drawn some conclusions from that. What will the log-file tell us when we execute some code:</p> <ol> <li>Stop the launchpad service.</li> <li>Delete any sub folders of the user account folders in the <code>C:\&lt;path_to_sql_server_instance&gt;\MSSQL\ExtensibilityData</code> directory. Do <strong>NOT</strong> delete the user account folders themselves.</li> <li>Delete all log files in the <code>C:\&lt;path_to_slq_server_instance&gt;\MSSQL\Log\ExtensibilityLog</code></li> <li>Restart the launchpad service.</li> <li>Execute the code in <em>Code Snippet 1</em> (the code without pause).</li> </ol> <p>When looking through the log-file, it is a LOT of information logged. I have tried to excerpt the most important bits below:</p> <p><figure class='code-highlight-figure'><figcaption class='code-highlight-caption'><span class='code-highlight-caption-title'>Log-file</span></figcaption><div class='code-highlight'><pre class='code-highlight-pre'><div data-line='1' class='code-highlight-row numbered'><div class='code-highlight-line'>1.
</div></div><div data-line='2' class='code-highlight-row numbered'><div class='code-highlight-line'>Session(3291DD7C-4451-48E1-9838-C5A0DF67FA74)
</div></div><div data-line='3' class='code-highlight-row numbered'><div class='code-highlight-line'>   CleanupOnExit=1, Settings.JobCleanupOnExit=1
</div></div><div data-line='4' class='code-highlight-row numbered'><div class='code-highlight-line'>Session 3291DD7C-4451-48E1-9838-C5A0DF67FA74
</div></div><div data-line='5' class='code-highlight-row numbered'><div class='code-highlight-line'>   assigned to MSSQLSERVER01 user
</div></div><div data-line='6' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div><div data-line='7' class='code-highlight-row numbered'><div class='code-highlight-line'>2.
</div></div><div data-line='8' class='code-highlight-row numbered'><div class='code-highlight-line'>ProcessPool(MSSQLSERVER01-ss-2) with minimum processes 5 created
</div></div><div data-line='9' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div><div data-line='10' class='code-highlight-row numbered'><div class='code-highlight-line'>3.
</div></div><div data-line='11' class='code-highlight-row numbered'><div class='code-highlight-line'>WorkingDirectory(C:...\MSSQLSERVER01\5F3BEB48-4E0A-4D0C-ACCF-3D8C6EB972EF) created (1)
</div></div><div data-line='12' class='code-highlight-row numbered'><div class='code-highlight-line'>WorkingDirectory(C:...\MSSQLSERVER01\E7AB7781-A8C7-421F-BAA0-074075B41082) created (1)
</div></div><div data-line='13' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div><div data-line='14' class='code-highlight-row numbered'><div class='code-highlight-line'>4.
</div></div><div data-line='15' class='code-highlight-row numbered'><div class='code-highlight-line'>CreateProces(C:...\R_SERVICES\bin\x64\rterm.exe
</div></div><div data-line='16' class='code-highlight-row numbered'><div class='code-highlight-line'>    --slave --no-restore --no-save
</div></div><div data-line='17' class='code-highlight-row numbered'><div class='code-highlight-line'>    -e "library(RevoScaleR);
</div></div><div data-line='18' class='code-highlight-row numbered'><div class='code-highlight-line'>    sessionDirectory &lt;- 'C:\...\5F3BEB48-4E0A-4D0C-ACCF-3D8C6EB972EF';
</div></div><div data-line='19' class='code-highlight-row numbered'><div class='code-highlight-line'>    sessionId &lt;- '5F3BEB48-4E0A-4D0C-ACCF-3D8C6EB972EF';
</div></div><div data-line='20' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div><div data-line='21' class='code-highlight-row numbered'><div class='code-highlight-line'>CreateProces(C:...\R_SERVICES\bin\x64\rterm.exe
</div></div><div data-line='22' class='code-highlight-row numbered'><div class='code-highlight-line'>    --slave --no-restore --no-save
</div></div><div data-line='23' class='code-highlight-row numbered'><div class='code-highlight-line'>    -e "library(RevoScaleR);
</div></div><div data-line='24' class='code-highlight-row numbered'><div class='code-highlight-line'>    sessionDirectory &lt;- 'C:\...\E7AB7781-A8C7-421F-BAA0-074075B41082';
</div></div><div data-line='25' class='code-highlight-row numbered'><div class='code-highlight-line'>    sessionId &lt;- 'E7AB7781-A8C7-421F-BAA0-074075B41082';
</div></div><div data-line='26' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div><div data-line='27' class='code-highlight-row numbered'><div class='code-highlight-line'>5.
</div></div><div data-line='28' class='code-highlight-row numbered'><div class='code-highlight-line'>Assigning PooledProcess(..., ..., 5F3BEB48-4E0A-4D0C-ACCF-3D8C6EB972EF,
</div></div><div data-line='29' class='code-highlight-row numbered'><div class='code-highlight-line'>    C:...\R_SERVICES\bin\x64\rterm.exe)
</div></div><div data-line='30' class='code-highlight-row numbered'><div class='code-highlight-line'>    to Job PooledProcess-5F3BEB48-4E0A-4D0C-ACCF-3D8C6EB972EF(0000081C)
</div></div><div data-line='31' class='code-highlight-row numbered'><div class='code-highlight-line'>Assigning PooledProcess(..., ..., E7AB7781-A8C7-421F-BAA0-074075B41082,
</div></div><div data-line='32' class='code-highlight-row numbered'><div class='code-highlight-line'>    C:...\R_SERVICES\bin\x64\rterm.exe)
</div></div><div data-line='33' class='code-highlight-row numbered'><div class='code-highlight-line'>    to Job PooledProcess-E7AB7781-A8C7-421F-BAA0-074075B41082(00000804)
</div></div><div data-line='34' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div><div data-line='35' class='code-highlight-row numbered'><div class='code-highlight-line'>6.
</div></div><div data-line='36' class='code-highlight-row numbered'><div class='code-highlight-line'>Session[3291DD7C-4451-48E1-9838-C5A0DF67FA74]
</div></div><div data-line='37' class='code-highlight-row numbered'><div class='code-highlight-line'>    attached to pooled processes [5F3BEB48-4E0A-4D0C-ACCF-3D8C6EB972EF]
</div></div><div data-line='38' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div><div data-line='39' class='code-highlight-row numbered'><div class='code-highlight-line'>7.
</div></div><div data-line='40' class='code-highlight-row numbered'><div class='code-highlight-line'>WorkingDirectory(C:...\A379EE0B-385A-41A9-86C3-A5C9D1FFDE7F) created (1)
</div></div><div data-line='41' class='code-highlight-row numbered'><div class='code-highlight-line'>CreateProces
</div></div><div data-line='42' class='code-highlight-row numbered'><div class='code-highlight-line'>    C:...\R_SERVICES\bin\x64\rterm.exe
</div></div><div data-line='43' class='code-highlight-row numbered'><div class='code-highlight-line'>    ...
</div></div><div data-line='44' class='code-highlight-row numbered'><div class='code-highlight-line'>    sessionId &lt;- 'A379EE0B-385A-41A9-86C3-A5C9D1FFDE7F';
</div></div><div data-line='45' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div><div data-line='46' class='code-highlight-row numbered'><div class='code-highlight-line'>8. This is interleaved with 7
</div></div><div data-line='47' class='code-highlight-row numbered'><div class='code-highlight-line'>SQLSatellite_LaunchSatellite(1, 3291DD7C-4451-48E1-9838-C5A0DF67FA74,
</div></div><div data-line='48' class='code-highlight-row numbered'><div class='code-highlight-line'>    1, 51008, nullptr, 000000CC5ADFE720,
</div></div><div data-line='49' class='code-highlight-row numbered'><div class='code-highlight-line'>    C:...\ExtensibilityData\MSSQLSERVER01) completed: 00000000  <br/>
</div></div><div data-line='50' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div><div data-line='51' class='code-highlight-row numbered'><div class='code-highlight-line'>7a. here we continue with creation of processes started at 7
</div></div><div data-line='52' class='code-highlight-row numbered'><div class='code-highlight-line'>Assigning PooledProcess(..., ..., A379EE0B-385A-41A9-86C3-A5C9D1FFDE7F,
</div></div><div data-line='53' class='code-highlight-row numbered'><div class='code-highlight-line'>    C:...\R_SERVICES\bin\x64\rterm.exe)
</div></div><div data-line='54' class='code-highlight-row numbered'><div class='code-highlight-line'>    to Job PooledProcess-A379EE0B-385A-41A9-86C3-A5C9D1FFDE7F(00000854)
</div></div><div data-line='55' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div><div data-line='56' class='code-highlight-row numbered'><div class='code-highlight-line'>...
</div></div><div data-line='57' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div><div data-line='58' class='code-highlight-row numbered'><div class='code-highlight-line'>9.
</div></div><div data-line='59' class='code-highlight-row numbered'><div class='code-highlight-line'>ProcessPool(MSSQLSERVER01-ss-2) adding PooledProcess(..., ...,
</div></div><div data-line='60' class='code-highlight-row numbered'><div class='code-highlight-line'>    E7AB7781-A8C7-421F-BAA0-074075B41082,
</div></div><div data-line='61' class='code-highlight-row numbered'><div class='code-highlight-line'>    C:...\R_SERVICES\bin\x64\rterm.exe)
</div></div><div data-line='62' class='code-highlight-row numbered'><div class='code-highlight-line'>ProcessPool(MSSQLSERVER01-ss-2) adding PooledProcess(..., ...,
</div></div><div data-line='63' class='code-highlight-row numbered'><div class='code-highlight-line'>    A379EE0B-385A-41A9-86C3-A5C9D1FFDE7F,
</div></div><div data-line='64' class='code-highlight-row numbered'><div class='code-highlight-line'>    C:...\R_SERVICES\bin\x64\rterm.exe)
</div></div><div data-line='65' class='code-highlight-row numbered'><div class='code-highlight-line'>ProcessPool(MSSQLSERVER01-ss-2) adding PooledProcess(..., ...,
</div></div><div data-line='66' class='code-highlight-row numbered'><div class='code-highlight-line'>    8CE5541F-3A70-4538-9329-9A74FC0580DE,
</div></div><div data-line='67' class='code-highlight-row numbered'><div class='code-highlight-line'>    C:...\R_SERVICES\bin\x64\rterm.exe)
</div></div><div data-line='68' class='code-highlight-row numbered'><div class='code-highlight-line'>ProcessPool(MSSQLSERVER01-ss-2) adding PooledProcess(..., ...,
</div></div><div data-line='69' class='code-highlight-row numbered'><div class='code-highlight-line'>    97608E5B-B70D-4E69-9D6D-56BEC2FC0F81,
</div></div><div data-line='70' class='code-highlight-row numbered'><div class='code-highlight-line'>    C:...\R_SERVICES\bin\x64\rterm.exe)
</div></div><div data-line='71' class='code-highlight-row numbered'><div class='code-highlight-line'>ProcessPool(MSSQLSERVER01-ss-2) adding PooledProcess(..., ...,
</div></div><div data-line='72' class='code-highlight-row numbered'><div class='code-highlight-line'>    74E3C23C-56B6-4A16-B1E3-E4C00335FB97,
</div></div><div data-line='73' class='code-highlight-row numbered'><div class='code-highlight-line'>    C:...\R_SERVICES\bin\x64\rterm.exe)
</div></div><div data-line='74' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div><div data-line='75' class='code-highlight-row numbered'><div class='code-highlight-line'>10.
</div></div><div data-line='76' class='code-highlight-row numbered'><div class='code-highlight-line'>Job PooledProcess-5F3BEB48-4E0A-4D0C-ACCF-3D8C6EB972EF(0000081C)
</div></div><div data-line='77' class='code-highlight-row numbered'><div class='code-highlight-line'>    WaitAll(1, 5000) completed with 0
</div></div><div data-line='78' class='code-highlight-row numbered'><div class='code-highlight-line'>Job PooledProcess-5F3BEB48-4E0A-4D0C-ACCF-3D8C6EB972EF(0000081C)
</div></div><div data-line='79' class='code-highlight-row numbered'><div class='code-highlight-line'>    destroyed
</div></div><div data-line='80' class='code-highlight-row numbered'><div class='code-highlight-line'>~WorkingDirectory
</div></div><div data-line='81' class='code-highlight-row numbered'><div class='code-highlight-line'>    (C:...\MSSQLSERVER01\5F3BEB48-4E0A-4D0C-ACCF-3D8C6EB972EF)
</div></div><div data-line='82' class='code-highlight-row numbered'><div class='code-highlight-line'>    deleted (0)
</div></div><div data-line='83' class='code-highlight-row numbered'><div class='code-highlight-line'>11.
</div></div><div data-line='84' class='code-highlight-row numbered'><div class='code-highlight-line'>Session 3291DD7C-4451-48E1-9838-C5A0DF67FA74
</div></div><div data-line='85' class='code-highlight-row numbered'><div class='code-highlight-line'>   removed from MSSQLSERVER01 user
</div></div><div data-line='86' class='code-highlight-row numbered'><div class='code-highlight-line'>Session(3291DD7C-4451-48E1-9838-C5A0DF67FA74)
</div></div><div data-line='87' class='code-highlight-row numbered'><div class='code-highlight-line'>    [SqlSatellite] deleted. Elapsed time: 1222 msecs
</div></div><div data-line='88' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div></pre></div></figure></p> <p><strong>Code Snippet 5:</strong> <em>Log when Executing Script</em></p> <p>Geez, quite a lot of information, and - as I mentioned above - I have tried to just show the log entries that I deem important. The entries themselves are also abbreviated quite a bit. So what do we see:</p> <ol> <li>We create a session for this request, and assigns the session to the executing user (MSSQLSERVER01).</li> <li>A pool for the processes is created.</li> <li>Two working directories (sub-folders) are created for the user (MSSQLSERVER01).</li> <li>Two physical RTerm process are created and assigned the id of the sub-folders.</li> <li>The processes are added to a job object (which has been created prior to this).</li> <li>The session is attached to one of the two processes. This process will now execute the request.</li> <li>Four new processes and working directories are created. Interleaved with this is point 8 (below). The existing session is not assigned to any of these. At this stage there are 6 processes in total, two from the original process creation and these four new ones. Five of these processes do not have any session attached.</li> <li>From what I can gather, here is where the request is actually executed.</li> <li>The 5 processes without the session are added to the process pool, and are available for new requests from the same user.</li> <li>The process which executed the request finishes and is being destroyed.</li> <li>The session is removed and deleted.</li> </ol> <p>From the above we can see how processes are created and then being pooled. The processes will eventually be torn down if they are not in use, as per the <code>StaleProcessTime</code> in <em>Code Snippet 3</em>.</p> <p>How does all this now fit into what we covered in the <a href="/2017/04/02/microsoft-sql-server-r-services-internals-ii/">internals II post</a>, and <em>Figure 2</em> above?</p> <h2>WinDbg</h2> <p>Well, let us try to find out. For this we use our trusty WinDbg (go back to the <a href="/2017/03/18/microsoft-sql-server-r-services-internals-i/">internals I post</a> if you need a re-fresher about WinDbg):</p> <ol> <li>Stop the launchpad service.</li> <li>Delete any sub folders of the user account folders in the <code>C:\&lt;path_to_sql_server_instance&gt;\MSSQL\ExtensibilityData</code> directory. Do <strong>NOT</strong> delete the user account folders themselves.</li> <li>Delete all log files in the <code>C:\&lt;path_to_slq_server_instance&gt;\MSSQL\Log\ExtensibilityLog</code></li> <li>Restart the launchpad service.</li> <li>Attach WinDbg to the launchpad process.</li> </ol> <p>As we did in the <a href="/2017/03/18/microsoft-sql-server-r-services-internals-i/">internals I post</a>, let's hunt for routines from the symbols. When looking at the log files above we see some references to <code>SQLSatellite</code> and in previous posts we have also seen satellite references. So, let us do a very coarse search: <code>x /n launchpad!*Satellite*</code>. By using the <code>/n</code> flag you sort everything by name, which can make things a bit more readable. Looking through what was returned, I have below listed some classes that looks interesting as well a couple of independent routines:</p> <p><figure class='code-highlight-figure'><figcaption class='code-highlight-caption'><span class='code-highlight-caption-title'>Satellite</span></figcaption><div class='code-highlight'><pre class='code-highlight-pre'><div data-line='1' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="c1">//classes</span>
</div></div><div data-line='2' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="n">launchpad</span><span class="o">!</span><span class="n">CSQLSatelliteCommunication</span>
</div></div><div data-line='3' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="n">launchpad</span><span class="o">!</span><span class="n">CSQLSatelliteConnection</span>
</div></div><div data-line='4' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="n">launchpad</span><span class="o">!</span><span class="n">CSQLSatelliteMessage</span>
</div></div><div data-line='5' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="n">launchpad</span><span class="o">!</span><span class="n">CSatelliteCargoContext</span>
</div></div><div data-line='6' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="n">launchpad</span><span class="o">!</span><span class="n">CSatelliteRuntimeContext</span>
</div></div><div data-line='7' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="n">launchpad</span><span class="o">!</span><span class="n">SatelliteJobObject</span>
</div></div><div data-line='8' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="n">launchpad</span><span class="o">!</span><span class="n">SatelliteSession</span>
</div></div><div data-line='9' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="n">launchpad</span><span class="o">!</span><span class="n">SatelliteSessionManager</span>
</div></div><div data-line='10' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="n">launchpad</span><span class="o">!</span><span class="n">Satellite_ResourceManager</span>
</div></div><div data-line='11' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div><div data-line='12' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="c1">//independent routines</span>
</div></div><div data-line='13' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="n">launchpad</span><span class="o">!</span><span class="n">CreateProcessForSatelliteSession</span>
</div></div><div data-line='14' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="n">launchpad</span><span class="o">!</span><span class="n">SQLSatellite_Init</span>
</div></div><div data-line='15' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="n">launchpad</span><span class="o">!</span><span class="n">SQLSatellite_InitLaunchContext</span>
</div></div><div data-line='16' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="n">launchpad</span><span class="o">!</span><span class="n">SQLSatellite_LaunchProcess</span></div></div></pre></div></figure></p> <p><strong>Code Snippet 6:</strong> <em>Interesting Output</em></p> <p>Having identified interesting classes and function as in <em>Code Snippet 6</em>, it is time to fine interesting routines, and through trial and error (setting breakpoints and executing code) finding out what is happening. I eventually arrived at the following (please remember from the previous post that I do not have symbols for the <code>RLauncher.dll</code>):</p> <p><figure class='code-highlight-figure'><figcaption class='code-highlight-caption'><span class='code-highlight-caption-title'>Call Chain</span></figcaption><div class='code-highlight'><pre class='code-highlight-pre'><div data-line='1' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">1.</span> <span class="n">launchpad</span><span class="o">!</span><span class="n">CLaunchContext</span><span class="o">::</span><span class="n">LaunchServTask</span>
</div></div><div data-line='2' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">2.</span>  <span class="n">launchpad</span><span class="o">!</span><span class="n">SatelliteSessionManager</span><span class="o">::</span><span class="n">ConstructSatelliteSession</span>
</div></div><div data-line='3' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">2.</span>    <span class="n">launchpad</span><span class="o">!</span><span class="n">SatelliteJobObject</span><span class="o">::</span><span class="n">CreateSatelliteJobObject</span>
</div></div><div data-line='4' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">2.</span>      <span class="n">launchpad</span><span class="o">!</span><span class="n">SatelliteSessionManager</span><span class="o">::</span><span class="n">CreateNewSessionObject</span>
</div></div><div data-line='5' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">3.</span>        <span class="n">launchpad</span><span class="o">!</span><span class="n">CLaunchContext</span><span class="o">::</span><span class="n">Launch</span>
</div></div><div data-line='6' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">4.</span>          <span class="n">Rlauncher</span><span class="o">!</span><span class="s">"MiscCalls"</span>
</div></div><div data-line='7' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">4.</span>            <span class="n">launchpad</span><span class="o">!</span><span class="n">SQLSatellite_LaunchProcess</span>
</div></div><div data-line='8' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">4.</span>              <span class="n">launchpad</span><span class="o">!</span><span class="n">CreateProcessForSatelliteSession</span>
</div></div><div data-line='9' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">4.</span>                <span class="n">launchpad</span><span class="o">!</span><span class="n">PhysicalUserContext</span><span class="o">::</span><span class="n">LaunchProcess</span>
</div></div><div data-line='10' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">4.</span>                  <span class="n">KERNELBASE</span><span class="o">!</span><span class="n">CreateProcessInternalW</span>
</div></div><div data-line='11' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">4.</span>          <span class="n">Rlauncher</span><span class="o">!</span><span class="s">"MiscCalls"</span>
</div></div><div data-line='12' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">4.</span>            <span class="n">launchpad</span><span class="o">!</span><span class="n">SQLSatellite_LaunchProcess</span>
</div></div><div data-line='13' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">4.</span>              <span class="n">launchpad</span><span class="o">!</span><span class="n">CreateProcessForSatelliteSession</span>
</div></div><div data-line='14' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">4.</span>                <span class="n">launchpad</span><span class="o">!</span><span class="n">PhysicalUserContext</span><span class="o">::</span><span class="n">LaunchProcess</span>
</div></div><div data-line='15' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">4.</span>                  <span class="n">KERNELBASE</span><span class="o">!</span><span class="n">CreateProcessInternalW</span>
</div></div><div data-line='16' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">4.</span>                <span class="n">launchpad</span><span class="o">!</span><span class="n">Satellite_ResourceManager</span><span class="o">::</span><span class="n">AssociateProcessToJobObject</span>
</div></div><div data-line='17' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">4.</span>                <span class="n">launchpad</span><span class="o">!</span><span class="n">Satellite_ResourceManager</span><span class="o">::</span><span class="n">AssociateProcessToJobObject</span>
</div></div><div data-line='18' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">4.</span>                  <span class="n">launchpad</span><span class="o">!</span><span class="n">SatelliteJobObject</span><span class="o">::</span><span class="n">AssociateProcess</span>
</div></div><div data-line='19' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">4.</span>                  <span class="n">launchpad</span><span class="o">!</span><span class="n">SatelliteJobObject</span><span class="o">::</span><span class="n">AssociateProcess</span>
</div></div><div data-line='20' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">4.</span>          <span class="n">Rlauncher</span><span class="o">!</span><span class="s">"MiscCalls"</span>
</div></div><div data-line='21' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">4.</span>            <span class="n">launchpad</span><span class="o">!</span><span class="n">SQLSatellite_LaunchProcess</span>
</div></div><div data-line='22' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">4.</span>              <span class="n">launchpad</span><span class="o">!</span><span class="n">CreateProcessForSatelliteSession</span>
</div></div><div data-line='23' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">4.</span>                <span class="n">launchpad</span><span class="o">!</span><span class="n">PhysicalUserContext</span><span class="o">::</span><span class="n">LaunchProcess</span>
</div></div><div data-line='24' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">4.</span>                  <span class="n">KERNELBASE</span><span class="o">!</span><span class="n">CreateProcessInternalW</span>
</div></div><div data-line='25' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">5.</span>  <span class="n">launchpad</span><span class="o">!</span><span class="n">CSQLSatelliteCommunication</span><span class="o">::</span><span class="n">SendResumeWithLoginInfo</span>
</div></div><div data-line='26' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">5.</span>    <span class="n">launchpad</span><span class="o">!</span><span class="n">CSQLSatelliteConnection</span><span class="o">::</span><span class="n">WriteMessage</span>
</div></div><div data-line='27' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">4.</span>                <span class="n">launchpad</span><span class="o">!</span><span class="n">Satellite_ResourceManager</span><span class="o">::</span><span class="n">AssociateProcessToJobObject</span>
</div></div><div data-line='28' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">4.</span>                 <span class="n">launchpad</span><span class="o">!</span><span class="n">SatelliteJobObject</span><span class="o">::</span><span class="n">AssociateProcess</span>
</div></div><div data-line='29' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">6.</span>          <span class="n">Rlauncher</span><span class="o">!</span><span class="s">"MiscCalls"</span>
</div></div><div data-line='30' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">6.</span>            <span class="n">launchpad</span><span class="o">!</span><span class="n">SQLSatellite_LaunchProcess</span>
</div></div><div data-line='31' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">6.</span>              <span class="n">launchpad</span><span class="o">!</span><span class="n">CreateProcessForSatelliteSession</span>
</div></div><div data-line='32' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">6.</span>                <span class="n">launchpad</span><span class="o">!</span><span class="n">PhysicalUserContext</span><span class="o">::</span><span class="n">LaunchProcess</span>
</div></div><div data-line='33' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">6.</span>                  <span class="n">KERNELBASE</span><span class="o">!</span><span class="n">CreateProcessInternalW</span>
</div></div><div data-line='34' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">6.</span>                <span class="n">launchpad</span><span class="o">!</span><span class="n">Satellite_ResourceManager</span><span class="o">::</span><span class="n">AssociateProcessToJobObject</span>
</div></div><div data-line='35' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">6.</span>                  <span class="n">launchpad</span><span class="o">!</span><span class="n">SatelliteJobObject</span><span class="o">::</span><span class="n">AssociateProcess</span>
</div></div><div data-line='36' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">6.</span>          <span class="n">Rlauncher</span><span class="o">!</span><span class="s">"MiscCalls"</span>
</div></div><div data-line='37' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">6.</span>            <span class="n">launchpad</span><span class="o">!</span><span class="n">SQLSatellite_LaunchProcess</span>
</div></div><div data-line='38' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">6.</span>              <span class="n">launchpad</span><span class="o">!</span><span class="n">CreateProcessForSatelliteSession</span>
</div></div><div data-line='39' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">6.</span>                <span class="n">launchpad</span><span class="o">!</span><span class="n">PhysicalUserContext</span><span class="o">::</span><span class="n">LaunchProcess</span>
</div></div><div data-line='40' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">6.</span>                  <span class="n">KERNELBASE</span><span class="o">!</span><span class="n">CreateProcessInternalW</span>
</div></div><div data-line='41' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">6.</span>                <span class="n">launchpad</span><span class="o">!</span><span class="n">Satellite_ResourceManager</span><span class="o">::</span><span class="n">AssociateProcessToJobObject</span>
</div></div><div data-line='42' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">6.</span>                  <span class="n">launchpad</span><span class="o">!</span><span class="n">SatelliteJobObject</span><span class="o">::</span><span class="n">AssociateProcess</span>
</div></div><div data-line='43' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">6.</span>          <span class="n">Rlauncher</span><span class="o">!</span><span class="s">"MiscCalls"</span>
</div></div><div data-line='44' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">6.</span>            <span class="n">launchpad</span><span class="o">!</span><span class="n">SQLSatellite_LaunchProcess</span>
</div></div><div data-line='45' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">6.</span>              <span class="n">launchpad</span><span class="o">!</span><span class="n">CreateProcessForSatelliteSession</span>
</div></div><div data-line='46' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">6.</span>                <span class="n">launchpad</span><span class="o">!</span><span class="n">PhysicalUserContext</span><span class="o">::</span><span class="n">LaunchProcess</span>
</div></div><div data-line='47' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">6.</span>                  <span class="n">KERNELBASE</span><span class="o">!</span><span class="n">CreateProcessInternalW</span>
</div></div><div data-line='48' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">6.</span>                <span class="n">launchpad</span><span class="o">!</span><span class="n">Satellite_ResourceManager</span><span class="o">::</span><span class="n">AssociateProcessToJobObject</span>
</div></div><div data-line='49' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">6.</span>                  <span class="n">launchpad</span><span class="o">!</span><span class="n">SatelliteJobObject</span><span class="o">::</span><span class="n">AssociateProcess</span>
</div></div><div data-line='50' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">7.</span>          <span class="n">launchpad</span><span class="o">!</span><span class="n">SatelliteSessionManager</span><span class="o">::</span><span class="n">DestroySatelliteSession</span>
</div></div><div data-line='51' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="mf">7.</span>            <span class="n">launchpad</span><span class="o">!</span><span class="n">SatelliteSessionManager</span><span class="o">::</span><span class="n">RemoveSessionObjectFromStore</span></div></div></pre></div></figure></p> <p><strong>Code Snippet 7:</strong> <em>High Level Call Chain</em></p> <p>From <em>Code Snippet 7</em> we see how we:</p> <ol> <li>Call <code>LaunchServTask</code></li> <li>Creating a satellite session, a job object and a session object.</li> <li>We then come into the code path were we launch the launcher and create the RTerm processes: <code>launchpad!CLaunchContext::Launch</code>.</li> <li>In there we do calls to the launcher dll (<code>Rlauncher!"MiscCalls"</code>), create the actual processes and assigns that to the job object. We initially create two processes, and one of the processes will be mapped to the session (as we saw from the log-file).</li> <li>The calls <code>launchpad!CSQLSatelliteCommunication::SendResumeWithLoginInfo</code> and <code>launchpad!CSQLSatelliteConnection::WriteMessage</code> is where the script is sent to the R process and executed. These calls are interleaved with the create process calls.</li> <li>We continue creating processes until we have six in total.</li> <li>The executing process (and session) is torn down when the execution has finished.</li> </ol> <blockquote><p><strong>NOTE:</strong> While the code executes we may see six RTerm processes.</p></blockquote> <h2>Summary</h2> <p>So, what does all this come to then? We have <em>Figure 2</em> which originates from the <a href="/2017/04/02/microsoft-sql-server-r-services-internals-ii/">internals II post</a>, where we looked into what is going on in the launchpad service. In this post we have seen the log files in <em>Code Snippet 3, 4, 5</em> and then we have the WinDbg output in <em>Code Snippet 7</em>. In <em>Figure 12</em> I try to summarize what we have discussed in this post:</p> <p><img class="center" src="/images/posts/sql-launchpad_processes_post.png" width="650" height="466" > <strong>Figure 12:</strong> <em>Summary</em></p> <p>In <em>Figure 12</em> we see:</p> <ul> <li>How there are backing folders in <code>C:\&lt;path_to_sql_server_instance&gt;\MSSQL\ExtensibilityData</code> for the group of user accounts that are mapped to SQL Server users when executing code via <code>sp_execute_external_script</code>. These backing folders will be storage for files etc., when executing. <ul> <li>The files are not placed directly in the account folder but in sub-folders created when the processes are created (see below).</li> </ul> </li> <li>When executing we, as in <em>Code Snippet 7</em>, call <code>launchpad!CLaunchContext::LaunchServTask</code>, and create a satellite session and a session object.</li> <li>We then go on and start creating working directories (the sub-folders mentioned above), and processes. In the figure the working directories are named <code>WorkingDir1</code> etc., whereas in reality the names are <code>Guid</code> values. The processes are RTerm processes and are assigned the same <code>Guid</code> as the working directory name. So a RTerm process always executes "under" one user account sub-folder.</li> <li>After two initial directories and processes have been created, one of the two processes are assigned to the created session.</li> <li>When the process has been assigned to the session, the script is executed via; <code>launchpad!CSQLSatelliteCommunication::SendResumeWithLoginInfo</code> and <code>launchpad!CSQLSatelliteConnection::WriteMessage</code>. This normally happens while the third process is created.</li> <li>Processes and working directories 4 - 6 are created. These processes are available for subsequent executions.</li> <li>When the execution has finished the session is torn down together with the process. <ul> <li>At this stage we now have 5 processes running, and 5 working folders.</li> </ul> </li> </ul> <p>As was the case in the <a href="/2017/04/02/microsoft-sql-server-r-services-internals-ii/">internals II post</a>, some parts of this post is educated guesswork. If anyone have more information I wild be more than happy to correct any inaccuracies. In either case, I hope you have enjoyed this journey in the "bowels" of the launchpad service.</p> <p>If you have comments, questions etc., please comment on this post or <a href="mailto:niels.it.berglund@gmail.com">ping</a> me.</p> <p> <h2>Share this Post:</h2> <a href="https://twitter.com/intent/tweet?url=http://nielsberglund.com/2017/04/13/microsoft-sql-server-r-services-internals-iii/&text=Microsoft SQL Server R Services - Internals III&via=nielsberglund" target="_blank">Twitter</a> <a href="https://plus.google.com/share?url=http://www.nielsberglund.com//2017/04/13/microsoft-sql-server-r-services-internals-iii/" onclick="javascript:window.open(this.href,'', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;"> | Google+</a> <a href="https://www.linkedin.com/shareArticle? mini=true &url=http://www.nielsberglund.com/2017/04/13/microsoft-sql-server-r-services-internals-iii/ &title=Microsoft SQL Server R Services - Internals III &summary=Blog post: SQL Server R Services series. Here we look at what happens when the launchpad service creates processes in SQL Server R Services. &source=http://www.nielsberglund.com/2017/04/13/microsoft-sql-server-r-services-internals-iii/"> | LinkedIn</a> </p> <!--<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script> http://www.linkedin.com/shareArticle?mini=true&url=<URL>&title=<TITILE>&summary=<DESCRIPTION>&sourc https://www.linkedin.com/shareArticle?mini=true&url=http://nielsberglund.com/2017/04/13/microsoft-sql-server-r-services-internals-iii/ --> <p> <h2>Blog Feed:</h2> To automatically receive more posts like this, please <a href="http://feeds.feedburner.com/manageddata/" target="_blank"> subscribe to my RSS/Atom feed</a> in your feed reader!</p> <br/> <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <!-- Ad2 --> <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-3005153158271538" data-ad-slot="1158080725" data-ad-format="auto"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script> <br/> </div> <div class="related"> <h2>Related Posts</h2> <div class="related-posts"> <h3><a href="/2018/06/24/sp-execute-external-script-and-permissions/"> sp_execute_external_script & Permissions <small> (24 Jun 2018)</small> </a></h3> </div> <div class="related-posts"> <h3><a href="/2018/06/23/installing-r-packages-in-sql-server-machine-learning-services-i/"> Installing R Packages in SQL Server Machine Learning Services - I <small> (23 Jun 2018)</small> </a></h3> </div> <div class="related-posts"> <h3><a href="/2018/06/17/interesting-stuff-week-24/"> Interesting Stuff - Week 24 <small> (17 Jun 2018)</small> </a></h3> </div> </div> <div id="disqus_thread"></div> <script> var disqus_developer = 1; (function() { /*DON'T EDIT BELOW THIS LINE*/ var d = document, s = d.createElement('script'); s.src = '//manageddata.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript> </div> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-18914734-2', 'auto'); ga('send', 'pageview'); </script> </body> </html>
